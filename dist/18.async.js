(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"6UrX":function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("UsS6");var r=l(a("xqAZ"));a("pdEl");var d=l(a("0Hx8"));a("1Y2U");var u=l(a("c8pg"));a("xzRB");var i=l(a("TOEs"));a("3PXm");var s=l(a("m2aW"));a("wPR8");var c=l(a("cmPo")),o=l(a("MVZn")),p=l(a("lwsE")),f=l(a("W8MJ")),h=l(a("a1gu")),m=l(a("Nsbk")),g=l(a("7W2i"));a("0lkx");var v=l(a("gEKc"));a("M50D");var y,b,S,E=l(a("5Zb7")),I=n(a("q1tI")),k=a("MuoO"),w=l(a("W5rP")),D=l(a("zHco")),C=l(a("BRcq")),P=l(a("q5xv")),V=(E.default.Item,v.default.Search,v.default.Group),R=function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")},x=(y=(0,k.connect)(function(e){return e}),b=E.default.create(),y(S=b(S=function(e){function t(){var e,a;(0,p.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,h.default)(this,(e=(0,m.default)(t)).call.apply(e,[this].concat(n))),a.state={selectedRows:[],formValues:{},enable:!1,data:[]},a.handleStandardTableChange=function(e,t,l){var n=a.props.dispatch,r=a.state.formValues,d=Object.keys(t).reduce(function(e,a){var l=(0,o.default)({},e);return l[a]=R(t[a]),l},{}),u=(0,o.default)({currentPage:e.current,pageSize:e.pageSize},r,d);l.field&&(u.sorter="".concat(l.field,"_").concat(l.order)),n({type:"gidc/queryIpResource",payload:u})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSaveData=function(e){a.props.dispatch({type:"gidc/modifyIpResource",payload:e})},a.handleDeleteData=function(e,t){var l=new Array;isNaN(e.ID)?l=e:l.push(e.ID);var n={ipaddrlist:JSON.stringify({data:l}),tag:e.tag};a.props.dispatch({type:"gidc/deleteIpResource",payload:n})},a.handleMenuClick=function(e){"remove"==e&&handleDeleteData(a.state.selectedRows)},a.handleSearch=function(e,t){if(e=e.replace(/\s+/g,""),e.length>0){var l=a.props.dispatch;l({type:"gidc/searchIpResource",payload:{ipaddress:e}})}},a}return(0,g.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"gidc/queryIpResource"}),e({type:"gidc/queryIpClassify"})}},{key:"render",value:function(){var e=this.props.gidc,t=this.state,a=t.selectedRows,l=t.enable;"ok"==e.ipcheck.data&&this.setState({enable:!0}),console.log("this.props",this.props);var n=I.default.createElement(c.default,{onClick:this.handleMenuClick,selectedKeys:[]},I.default.createElement(c.default.Item,{key:"remove"},"\u5220\u9664"),I.default.createElement(c.default.Item,{key:"approval"},"\u5f00\u542f\u9884\u7559")),o=I.default.createElement("div",{style:{textAlign:"center"}},I.default.createElement(V,{compact:!0},I.default.createElement(s.default,{size:"large",style:{color:"blue"}},"ipAddress"),I.default.createElement(v.default.Search,{placeholder:"\u8bf7\u8f93\u5165ip \u5730\u5740",enterButton:"\u641c\u7d22",size:"large",onSearch:this.handleSearch,style:{width:522}})));return I.default.createElement(D.default,{title:"ip\u8d44\u6e90\u5217\u8868",content:o},I.default.createElement(r.default,{bordered:!1},I.default.createElement("div",{className:P.default.tableList},I.default.createElement("div",{style:{height:40}},I.default.createElement(C.default,{ipclassify:e.ipclassify,ipcheck:e.ipcheck,checkloading:e.loading,enable:l}),a.length>0&&I.default.createElement("div",null,I.default.createElement(u.default,{overlay:n},I.default.createElement(s.default,null,"\u66f4\u591a\u64cd\u4f5c ",I.default.createElement(i.default,{type:"down"}))))),I.default.createElement(d.default,null,"  IP\u8d44\u6e90\u6570\u636e  "),I.default.createElement(w.default,{selectedRows:a,ipresource:e.ipresource,handleSaveData:this.handleSaveData,handleDeleteData:this.handleDeleteData,handleSelectRows:this.handleSelectRows,onChange:this.handleStandardTableChange}))))}}]),t}(I.PureComponent))||S)||S);t.default=x},BRcq:function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("NG6T");var r=l(a("uZXS")),d=l(a("pVnL")),u=l(a("lSNA"));a("3PXm");var i=l(a("m2aW"));a("s/1u");var s=l(a("TMZs")),c=l(a("lwsE")),o=l(a("W8MJ")),p=l(a("a1gu")),f=l(a("Nsbk")),h=l(a("7W2i"));a("0lkx");var m=l(a("gEKc"));a("M50D");var g=l(a("5Zb7"));a("6ASg");var v,y,b,S=l(a("pKc7")),E=n(a("q1tI")),I=l(a("q5xv")),k=a("MuoO"),w=S.default.Option,D=g.default.Item,C=m.default.TextArea,P=(v=(0,k.connect)(function(e){return e}),y=g.default.create(),v(b=y(b=function(e){function t(){var e,a;(0,c.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,p.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(n))),a.state={modalVisible:!1,result:"",data:[],loading:a.props.checkloading,enable:!1},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.ip2int=function(e){var t=0;return e=e.split("."),t=256*Number(e[0])*256*256+256*Number(e[1])*256+256*Number(e[2])+Number(e[3]),t>>>=0,t},a.int2iP=function(e){var t,a=new Array;return a[0]=e>>>24>>>0,a[1]=e<<8>>>24>>>0,a[2]=e<<16>>>24,a[3]=e<<24>>>24,t=String(a[0])+"."+String(a[1])+"."+String(a[2])+"."+String(a[3]),t},a.isEqualIPAddress=function(e,t,l){if(!e||!t||!l)return a.setState({result:"\u5404\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a"}),!1;var n=[],r=[];e=e.split("."),t=t.split("."),l=l.split(".");for(var d=0,u=e.length;d<u;d+=1)n.push(parseInt(e[d])&parseInt(l[d])),r.push(parseInt(t[d])&parseInt(l[d]));return n.join(".")==r.join(".")?(a.setState({result:"\u5728\u540c\u4e00\u4e2a\u7f51\u6bb5"}),!0):(a.setState({result:"\u4e0d\u5728\u540c\u4e00\u4e2a\u7f51\u6bb5"}),!1)},a.handleAddipResource=function(e){var t=a.props.form;e.preventDefault(),t.validateFields(function(e,l){if(!e){var n={ipaddress:JSON.stringify({data:a.state.data}),mask:t.getFieldValue("mask")?t.getFieldValue("mask"):"",remarks:t.getFieldValue("remarks")?t.getFieldValue("remarks"):"",typeid:a.state.selectedTypeValue,purposeid:a.state.SelectPurposeValue};a.props.dispatch({type:"gidc/addIpResource",payload:n}),s.default.success("\u6dfb\u52a0\u6210\u529f"),a.setState({modalVisible:!1}),t.resetFields()}})},a.handleLineStatus=function(e){1==e.target.value?a.setState({showFormProline:!1,valueProline:e.target.value}):a.setState({showFormProline:!0,valueProline:e.target.value})},a.handleSelectLineValue=function(e){a.setState({selectedLineValue:e})},a.handleSelectTypeValue=function(e){a.setState({selectedTypeValue:e})},a.handleSelectPurposeValue=function(e){a.setState({SelectPurposeValue:e})},a.handleCheckIp=function(e){var t=a.props.form;e.preventDefault();var l={ipaddr_begin:t.getFieldValue("ipaddr_begin")?t.getFieldValue("ipaddr_begin"):"",ipaddr_end:t.getFieldValue("ipaddr_end")?t.getFieldValue("ipaddr_end"):"",mask:t.getFieldValue("mask")?t.getFieldValue("mask"):""};a.isEqualIPAddress(l.ipaddr_begin,l.ipaddr_end,l.mask)&&a.handleCheckIpRequest(l.ipaddr_begin,l.ipaddr_end)},a.handleCheckIpRequest=function(e,t){var l=new Array,n=a.ip2int(e),r=a.ip2int(t);if(r-n>255)a.setState({result:"\u8f93\u5165\u7684\u7f51\u6bb5\u5305\u542bip\u6570\u91cf\u8fc7\u5927."});else{for(var d=n;d<=r;d++)l.push(a.int2iP(d));a.setState({loading:!0}),a.props.dispatch({type:"gidc/checkIpResource",payload:{ipaddress:JSON.stringify({data:l})}}),a.props.enable?a.setState({result:"ip\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528",data:l,enable:!0}):a.setState({result:""})}},a}return(0,h.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props,l=(a.submitting,a.ipclassify),n=a.checkloading,s=this.state.enable;console.log("ADD.props",this.props);var c={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}};return E.default.createElement("div",{className:I.default.tableListOperator,style:{float:"left"}},E.default.createElement(i.default,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"\u6dfb\u52a0IP\u8d44\u6e90"),E.default.createElement(r.default,{title:"\u6dfb\u52a0IP\u8d44\u6e90",visible:this.state.modalVisible,onOk:this.handleAddipResource,width:600,confirmLoading:!s,onCancel:function(){return e.handleModalVisible()}},E.default.createElement(D,(0,d.default)({},c,{label:"IP\u7f51\u6bb5\u8d77\u59cb\u5730\u5740"}),t("ipaddr_begin",{rules:[(0,u.default)({required:!0,message:"\u8bf7\u8f93\u5165IP\u8d77\u59cb\u5730\u5740",pattern:/^([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])$/},"message","\u8bf7\u8f93\u5165\u6b63\u786eip\u5730\u5740")]})(E.default.createElement(m.default,{placeholder:"\u8bf7\u8f93\u5165IP\u8d77\u59cb\u5730\u5740"}))),E.default.createElement(D,(0,d.default)({},c,{label:"IP\u7f51\u6bb5\u7ed3\u675f\u5730\u5740"}),t("ipaddr_end",{rules:[(0,u.default)({message:"\u8bf7\u8f93\u5165IP\u6bb5\u7ed3\u675f\u5730\u5740",pattern:/^([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])$/},"message","\u8bf7\u8f93\u5165\u6b63\u786eip\u5730\u5740")]})(E.default.createElement(m.default,{placeholder:"\u4e0d\u8f93\u5165\u9ed8\u8ba4\u503c\u7b49\u4e8eIP\u6bb5\u8d77\u59cb\u5730\u5740"}))),E.default.createElement(D,(0,d.default)({},c,{label:"\u63a9\u7801"}),t("mask",{rules:[(0,u.default)({required:!0,message:"\u8bf7\u8f93\u5165\u7f51\u7edc\u5730\u5740\u63a9\u7801",pattern:/^(254|252|248|240|224|192|128|0)\.0\.0\.0|255\.(254|252|248|240|224|192|128|0)\.0\.0|255\.255\.(254|252|248|240|224|192|128|0)\.0|255\.255\.255\.(254|252|248|240|224|192|128|0)$/},"message","\u8bf7\u8f93\u5165\u6b63\u786e\u63a9\u7801")]})(E.default.createElement(m.default,{placeholder:"\u8bf7\u8f93\u5165\u7f51\u7edc\u5730\u5740\u63a9\u7801"}))),E.default.createElement(D,(0,d.default)({},c,{label:"\u7f51\u7edc\u7c7b\u578b"}),t("typeid",{rules:[{required:!0}]})(E.default.createElement(S.default,{placeholder:"\u9009\u62e9\u7f51\u7edc\u7c7b\u578b",style:{width:120},onChange:this.handleSelectTypeValue},l.data.iptype.length>0&&l.data.iptype.map(function(e){return E.default.createElement(w,{key:e.ID,value:e.ID},e.iptype)})))),E.default.createElement(D,(0,d.default)({},c,{label:"\u7528\u9014"}),t("purposeid",{rules:[{required:!0}]})(E.default.createElement(S.default,{placeholder:"\u9009\u62e9\u7528\u9014",style:{width:120},onChange:this.handleSelectPurposeValue},l.data.ippurpose.length>0&&l.data.ippurpose.map(function(e){return E.default.createElement(w,{key:e.ID,value:e.ID},e.iptitle)})))),E.default.createElement(D,(0,d.default)({},c,{label:"\u5907\u6ce8"}),t("remarks",{rules:[{required:!0,message:"\u5907\u6ce8"}]})(E.default.createElement(C,{style:{minHeight:32},placeholder:"\u673a\u623f\u63cf\u8ff0",rows:4}))),E.default.createElement(D,(0,d.default)({},c,{label:"\u68c0\u6d4bip\u6bb5"}),E.default.createElement(i.default,{icon:"check",loading:n,onClick:function(t){return e.handleCheckIp(t)}},"\u68c0\u6d4bIP\u6bb5"),E.default.createElement("br",null),E.default.createElement("span",{style:{color:"#F00",font:"bold"}}," ",this.state.result," "))))}}]),t}(E.PureComponent))||b)||b);t.default=P},RQNy:function(e,t,a){e.exports={standardTable:"antd-pro-gcmdb-ui-src-components-resource-ip-table-ip-standardTable",tableAlert:"antd-pro-gcmdb-ui-src-components-resource-ip-table-ip-tableAlert"}},W5rP:function(e,t,a){"use strict";var l=a("284h"),n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ggfa");var r=n(a("M+wZ")),d=n(a("MVZn")),u=n(a("RIqP"));a("8EHj");var i=n(a("6xKx"));a("pdEl");var s=n(a("0Hx8")),c=n(a("lwsE")),o=n(a("W8MJ")),p=n(a("a1gu")),f=n(a("Nsbk")),h=n(a("7W2i"));a("0lkx");var m=n(a("gEKc"));a("6ASg");var g=n(a("pKc7")),v=l(a("q1tI")),y=(n(a("wd/R")),n(a("RQNy"))),b=(a("Po9p"),g.default.Option),S=function(e){var t=e.editable,a=e.value,l=e.onChange;return v.default.createElement("div",null,t?v.default.createElement(m.default,{style:{margin:"-5px 0"},value:a,onChange:function(e){return l(e.target.value)}}):a)},E=function(e){function t(){var e,a;(0,c.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,p.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(n))),a.state={selectedRowKeys:[],totalCallNo:0,data:[],status:!1,disabled:!0,rateValue:3},a.columns=[{title:"IP\u540d\u79f0",dataIndex:"ipaddress",width:"15%",render:function(e,t){return a.renderColumns(e,t,"ipaddress")}},{title:"\u7c7b\u578b",dataIndex:"iptype",width:"15%",render:function(e,t){var l=a.props.ipresource.data.iptype;return v.default.createElement(g.default,{disabled:a.state.disabled,placeholder:e,style:{width:120},onChange:a.handleSelectPurposeValue},l.length&&l.map(function(e){return v.default.createElement(b,{key:e.ID,value:e.ID},e.iptype)}))}},{title:"\u7528\u9014",dataIndex:"iptitle",width:"15%",render:function(e,t){var l=a.props.ipresource.data.ippurpose;return v.default.createElement(g.default,{disabled:a.state.disabled,placeholder:e,style:{width:120},onChange:a.handleSelectPurposeValue},l.length&&l.map(function(e){return v.default.createElement(b,{key:e.ID,value:e.ID},e.iptitle)}))}},{title:"\u63a9\u7801",dataIndex:"mask",width:"15%",render:function(e,t){return a.renderColumns(e,t,"mask")}},{title:"\u72b6\u6001",dataIndex:"status",width:"15%",filters:[{text:"\u672a\u4f7f\u7528",value:1},{text:"\u5df2\u4f7f\u7528",value:2},{text:"\u9884\u7559",value:3}],render:function(e,t){var a=t.status,l={color:"red"};return v.default.createElement("div",{style:l},a)}},{title:"\u5907\u6ce8",dataIndex:"remarks",width:"15%",render:function(e,t){return a.renderColumns(e,t,"remarks")}},{title:"\u64cd\u4f5c",dataIndex:"ID",width:"20%",render:function(e,t){var l=t.editable,n=t.deleteable;return v.default.createElement("div",{className:"editable-row-operations"},!n&&(l?v.default.createElement("span",null,v.default.createElement("a",{onClick:function(){return a.save(t.ID,t.typeid,t.purposeid)}},"\u4fdd\u5b58"),v.default.createElement(s.default,{type:"vertical"}),v.default.createElement(i.default,{title:"\u786e\u5b9a\u53d6\u6d88?",onConfirm:function(){return a.cancel(t.ID)}},v.default.createElement("a",null,"\u53d6\u6d88"))):v.default.createElement("span",null,v.default.createElement("a",{onClick:function(){return a.edit(t.ID)}},"\u7f16\u8f91"))),!l&&(n?v.default.createElement("span",null,v.default.createElement(i.default,{title:"\u786e\u5b9a\u5220\u9664?",onConfirm:function(){return a.confirmdelete(t.ID)}},v.default.createElement("a",null,"\u63d0\u4ea4")),v.default.createElement(s.default,{type:"vertical"}),v.default.createElement("a",{onClick:function(){return a.canceldelete(t.ID)}},"\u53d6\u6d88")):v.default.createElement("span",{style:{marginLeft:10}},v.default.createElement("a",{onClick:function(){return a.askdelete(t.ID)}},"\u5220\u9664"))))}}],a.handleCommentChange=function(e,t){var l=(0,u.default)(a.state.data),n=l.filter(function(t){return e===t.ID})[0];n&&(n.comment=t,a.setState({data:l}))},a.handleTableChange=function(e,t,l){a.props.onChange(e,t,l)},a.handleRowSelectChange=function(e,t){var l=t.reduce(function(e,t){return e+parseFloat(t.callNo,10)},0);a.props.onSelectRow&&a.props.onSelectRow(t),a.setState({selectedRowKeys:e,totalCallNo:l}),a.props.handleSelectRows(e)},a.handleSelectTypeValue=function(e){a.setState({selectedTypeValue:e})},a.handleSelectPurposeValue=function(e){a.setState({SelectPurposeValue:e})},a}return(0,h.default)(t,e),(0,o.default)(t,[{key:"componentWillReceiveProps",value:function(e){console.log("Iptable componentWillReceiveProps",e),e.ipresource.data.ipresourcelist?this.setState({data:e.ipresource.data.ipresourcelist}):this.setState({data:e.ipresource.data})}},{key:"renderColumns",value:function(e,t,a){var l=this;return v.default.createElement(S,{editable:t.editable,value:e,onChange:function(e){return l.handleChange(e,t.ID,a)}})}},{key:"handleChange",value:function(e,t,a){var l=(0,u.default)(this.state.data),n=l.filter(function(e){return t===e.ID})[0];n&&(n[a]=e,this.setState({data:l,disabled:!1}))}},{key:"edit",value:function(e){var t=(0,u.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(a.editable=!0,this.setState({data:t,disabled:!1}))}},{key:"save",value:function(e,t,a){var l=(0,u.default)(this.state.data),n=l.filter(function(t){return e===t.ID})[0];n&&(delete n.editable,"undefined"===typeof this.state.selectedTypeValue?n.typeid=t:n.typeid=this.state.selectedTypeValue,"undefined"==typeof this.state.SelectPurposeValue?n.purposeid=a:n.purposeid=this.state.SelectPurposeValue,this.setState({data:l,disabled:!0}),this.cacheData=l.map(function(e){return(0,d.default)({},e)}),this.props.handleSaveData(n))}},{key:"cancel",value:function(e){var t=(0,u.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(Object.assign(a,this.cacheData.filter(function(t){return e===t.ID})[0]),delete a.editable,this.setState({data:t,disabled:!0}))}},{key:"askdelete",value:function(e){var t=(0,u.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(a.deleteable=!0,this.setState({data:t}))}},{key:"confirmdelete",value:function(e){var t=(0,u.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];if(a){var l=t.indexOf(a);l>-1&&t.splice(l,1),a.tag=!0,this.setState({data:t}),this.cacheData=t.map(function(e){return(0,d.default)({},e)}),this.props.handleDeleteData(a)}}},{key:"canceldelete",value:function(e){var t=(0,u.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(Object.assign(a,this.cacheData.filter(function(t){return e===t.ID})[0]),delete a.deleteable,this.setState({data:t}))}},{key:"render",value:function(){var e=this.props,t=e.ipresource,a=(e.loading,this.state),l=a.selectedRowKeys,n=(a.totalCallNo,{selectedRowKeys:l,onChange:this.handleRowSelectChange,getCheckboxProps:function(e){return{disabled:e.disabled}}}),u=(0,d.default)({showSizeChanger:!0,showQuickJumper:!0},t.pagination);return this.cacheData=this.state.data.map(function(e){return(0,d.default)({},e)}),v.default.createElement("div",{className:y.default.standardTable},v.default.createElement(r.default,{bordered:!0,rowSelection:n,pagination:u,rowKey:function(e){return e.ID},dataSource:this.state.data,columns:this.columns,onChange:this.handleTableChange}))}}]),t}(v.PureComponent),I=E;t.default=I},q5xv:function(e,t,a){e.exports={tableList:"antd-pro-gcmdb-ui-src-pages-g-resource-g-idc-ipresource-ipresouce-tableList",tableListOperator:"antd-pro-gcmdb-ui-src-pages-g-resource-g-idc-ipresource-ipresouce-tableListOperator",tableListForm:"antd-pro-gcmdb-ui-src-pages-g-resource-g-idc-ipresource-ipresouce-tableListForm",submitButtons:"antd-pro-gcmdb-ui-src-pages-g-resource-g-idc-ipresource-ipresouce-submitButtons"}}}]);