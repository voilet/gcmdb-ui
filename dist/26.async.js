(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[26],{C4GF:function(e,t,a){"use strict";var l=a("TqRt"),u=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("UsS6");var n=l(a("xqAZ"));a("3PXm");var d=l(a("m2aW"));a("sGLA");var r=l(a("156k"));a("4Ox4");var i=l(a("83Te"));a("pdEl");var c=l(a("0Hx8"));a("sL9k");var s=l(a("BlmP"));a("9sh3");var f=l(a("r3sT"));a("hjcW");var o=l(a("Tmqy")),m=l(a("pVnL")),p=l(a("lSNA"));a("s/1u");var h=l(a("TMZs")),g=l(a("lwsE")),E=l(a("W8MJ")),b=l(a("a1gu")),y=l(a("Nsbk")),_=l(a("7W2i")),V=l(a("PJYZ"));a("6ASg");var v=l(a("pKc7"));a("M50D");var F=l(a("5Zb7"));a("31Pz");var k=l(a("j5+a"));a("0lkx");var D,w,I,S=l(a("gEKc")),C=u(a("q1tI")),q=a("7DNP"),P=a("MuoO"),j=(l(a("Y+p1")),l(a("lhe0"))),H=l(a("FHVR")),Y=l(a("wd/R")),M=S.default.TextArea,R=k.default.TabPane,A=F.default.Item,B=v.default.Option,K={labelCol:{span:6},wrapperCol:{span:18}},T="YYYY/MM/DD",x=[],O=(D=(0,P.connect)(function(e){return e}),w=F.default.create(),D(I=w(I=function(e){function t(){var e,a;(0,g.default)(this,t);for(var l=arguments.length,u=new Array(l),E=0;E<l;E++)u[E]=arguments[E];return a=(0,b.default)(this,(e=(0,y.default)(t)).call.apply(e,[this].concat(u))),a.state={activeKey:"-1",title:"",panes:[],headlist:[],dateStatus:!0,cabinetData:[],idcData:[],BaysData:[],projectlist:[],hostid:0,allprojectids:[],delprojectids:[],haspower:!0},a.handleIdcChange=function(e){a.props.dispatch({type:"gidc/queryIdcRelation",payload:"?tag=cabinet&id=".concat(e)}),a.props.form.setFieldsValue({cabinet_id:a.props.gidc.cabinet.data.map(function(e){return e.title})})},a.handlecabinetChange=function(e){a.props.dispatch({type:"gidc/queryIdcRelation",payload:"?tag=bays&id=".concat(e)}),a.props.form.setFieldsValue({bay_id:a.props.gidc.bays.data.map(function(e){return e.title})})},a.handleProjectLine=function(e){a.props.dispatch({type:"gproline/getProjectGroupbyId",payload:e})},a.handleProjectGroup=function(e){a.props.dispatch({type:"gproline/getProjectbyId",payload:e})},a.projectRemove=function(e){var t=a.props.form,l=t.getFieldValue("keys");1!==l.length&&t.setFieldsValue({keys:l.filter(function(t){return t!==e})})},a.isInArray=function(e,t){for(var a=0;a<e.length;a++)if(t===e[a])return!0;return!1},a.handleSave=function(e){e.preventDefault();var t=a.props.form,l=a.state.dateStatus,u=a.props.gdevice;t.validateFields(function(e,n){if(!e)if(l){if(l){var d,r=(d={serialnumber:t.getFieldValue("serialnumber")?t.getFieldValue("serialnumber"):"",eth1:t.getFieldValue("eth1")?t.getFieldValue("eth1"):"",eth2:t.getFieldValue("eth2")?t.getFieldValue("eth2"):"",eth3:t.getFieldValue("eth3")?t.getFieldValue("eth3"):"",eth4:t.getFieldValue("eth4")?t.getFieldValue("eth4"):"",fqdn:t.getFieldValue("fqdn")?t.getFieldValue("fqdn"):"",internal_ip:t.getFieldValue("internal_ip")?t.getFieldValue("internal_ip"):"",mac:t.getFieldValue("mac")?t.getFieldValue("mac"):"",switch_port:t.getFieldValue("switch_port")?t.getFieldValue("switch_port"):"",start_guaratee:t.getFieldValue("start_guaratee")?t.getFieldValue("start_guaratee").format("YYYY-MM-DD HH:mm:ss"):"",stop_guaratee:t.getFieldValue("stop_guaratee")?t.getFieldValue("stop_guaratee").format("YYYY-MM-DD HH:mm:ss"):"",hardware_vendor:t.getFieldValue("hardware_vendor")?t.getFieldValue("hardware_vendor"):"",manufacturer:t.getFieldValue("manufacturer")?t.getFieldValue("manufacturer"):"",cpu_model:t.getFieldValue("cpu_model")?t.getFieldValue("cpu_model"):"",cpuarch:t.getFieldValue("cpuarch")?t.getFieldValue("cpuarch"):"",num_cpus:t.getFieldValue("num_cpus")?t.getFieldValue("num_cpus"):"",disk:t.getFieldValue("disk")?t.getFieldValue("disk"):"",assets_number:t.getFieldValue("assets_number")?t.getFieldValue("assets_number"):""},(0,p.default)(d,"assets_number",t.getFieldValue("service_code")?t.getFieldValue("service_code"):""),(0,p.default)(d,"assets_number",t.getFieldValue("memory")?t.getFieldValue("memory"):""),(0,p.default)(d,"osversion",t.getFieldValue("osversion")?t.getFieldValue("osversion"):""),(0,p.default)(d,"planversion",t.getFieldValue("planversion")?t.getFieldValue("planversion"):""),(0,p.default)(d,"user_id",t.getFieldValue("user_manger")?t.getFieldValue("user_manger"):""),(0,p.default)(d,"remarks",t.getFieldValue("remarks")?t.getFieldValue("remarks"):""),d);switch(t.getFieldValue("business_id")){case"host\u5df2\u4e0a\u7ebf":r.businessid=10;break;case"host\u672a\u4e0b\u7ebf":r.businessid=9;break;case"host\u5df2\u4e0b\u7ebf":r.businessid=4;break;default:r.businessid=t.getFieldValue("business_id")}a.state.haspower?r.statusid=2:r.statusid=3,u.hostdetail.data.idc_title===t.getFieldValue("idc_id")?r.idc_id=u.hostdetail.data.idc_ID:r.idc_id=t.getFieldValue("idc_id"),u.hostdetail.data.cabinet_title===t.getFieldValue("cabinet_id")?r.cabinet_id=u.hostdetail.data.cabinet_ID:r.cabinet_id=t.getFieldValue("cabinet_id"),u.hostdetail.data.bays_title===t.getFieldValue("bay_id")?r.bay_id=u.hostdetail.data.bays_ID:r.bay_id=t.getFieldValue("bay_id"),r.project=Array.from(new Set(x)),a.props.dispatch({type:"gdevice/modifyHost",payload:{id:a.props.location.query.id,description:r,cb:function(e){"200"==e.status?h.default.success("\u4fee\u6539\u6210\u529f"):h.default.error("\u4fee\u6539\u5931\u8d25"),x=[],[]}}})}}else h.default.error("\u7ef4\u4fdd\u65f6\u95f4\u5fc5\u987b\u5927\u4e8e\u8d2d\u4e70\u65f6\u95f4")})},a.handleSaveProData=function(e,t){x=[],t.map(function(e){e.ID>=1e4?x.push(e.project_id):x.push(e.ID)})},a.handleDeleteProData=function(e,t){x=[],t.map(function(e){e.ID>=1e4?x.push(e.project_id):x.push(e.ID)})},a.HandleSelectHostStatus=function(e){a.props.form.setFieldsValue({business_id:"".concat(e)})},a.handleStatusChange=function(e){a.setState({haspower:e})},a.tabcontent=function(e){var t,l=a.props.form.getFieldDecorator,u=a.props,p=u.gidc,h=u.gdevice,g=u.ghardware;console.log("this.props",a.props.gidc);var E=a.props.gidc.idc.data.map(function(e){return C.default.createElement(B,{key:e.ID,value:e.ID},e.title)});t=0==p.cabinet.data.length?p.cabinet.data.map(function(e){return C.default.createElement(B,{key:"-1",value:"-1"},"\u8bf7\u9009\u62e9")}):(p.cabinet.data||[]).map(function(e){return C.default.createElement(B,{key:e.ID,value:e.ID},e.title)});var b=p.bays.data.map(function(e){return C.default.createElement(B,{key:e.ID,value:e.ID},e.title)}),y=h.user.data.map(function(e){return C.default.createElement(B,{key:e.ID,value:e.ID},e.title)}),_=g.composedata.data.list.map(function(e){return C.default.createElement(B,{key:e.ID,value:e.ID},e.title)});return C.default.createElement(n.default,{bordered:!1},C.default.createElement(F.default,{className:"ant-advanced-search-form",onSubmit:a.handleSave},C.default.createElement(s.default,null,C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u4e3b\u673a\u72b6\u6001"},K),l("business_id",{initialValue:"".concat(e.status.host_business_status_title),rules:[{required:!0,message:"\u8bf7 \u9009\u62e9\u4e3b\u673a\u4e1a\u52a1\u72b6\u6001!"}]})(C.default.createElement(v.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"},onChange:a.HandleSelectHostStatus},C.default.createElement(B,{key:"4",value:"4"},"host\u5df2\u4e0b\u7ebf"),C.default.createElement(B,{key:"9",value:"9"},"host\u672a\u4e0b\u7ebf"),C.default.createElement(B,{key:"10",value:"10"},"host\u5df2\u4e0a\u7ebf"))))),C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u4e3b\u673a\u7535\u6e90"},K),C.default.createElement(f.default,{checkedChildren:"\u5f00\u673a",unCheckedChildren:"\u5173\u673a",checked:a.state.haspower,onChange:function(e){return a.handleStatusChange(e)}})))),C.default.createElement(c.default,{style:{marginBottom:32}}),C.default.createElement(s.default,{gutter:24},C.default.createElement(o.default,{span:8},C.default.createElement("span",null,"\u7f51\u7edc\u4fe1\u606f"))),C.default.createElement(s.default,{gutter:24},C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u7f51\u53611:"},K),l("eth1",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165ip\u5730\u5740!"}],initialValue:"".concat(e.eth1)})(C.default.createElement(S.default,{placeholder:e.eth1})))),C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u7f51\u53612:"},K),l("eth2",{rules:[{message:"\u8bf7\u8f93\u5165ip\u5730\u5740!"}],initialValue:"".concat(e.eth2)})(C.default.createElement(S.default,{placeholder:e.eth2})))),C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u4e3b\u673a\u540d(fqdn)"},K),l("fqdn",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4e3b\u673a\u540d!"}],initialValue:"".concat(e.fqdn)})(C.default.createElement(S.default,{placeholder:e.fqdn}))))),C.default.createElement(s.default,{gutter:24},C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u7f51\u53613:"},K),l("eth3",{initialValue:"".concat(e.eth3)})(C.default.createElement(S.default,{placeholder:e.eth3})))),C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u7f51\u53614:"},K),l("eth4",{initialValue:"".concat(e.eth4)})(C.default.createElement(S.default,{placeholder:e.eth4})))),C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u8fdc\u7a0b\u63a7\u5236\u5361IP"},K),l("internal_ip",{rules:[{initialValue:"".concat(e.internal_ip)}]})(C.default.createElement(S.default,{placeholder:e.internal_ip}))))),C.default.createElement(s.default,{gutter:24},C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"MAC\u5730\u5740: "},K),l("mac",{initialValue:"".concat(e.mac)})(C.default.createElement(S.default,{placeholder:e.mac})))),C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u6240\u5728\u4ea4\u6362\u673a\u7aef\u53e3: "},K),l("switch_port",{initialValue:"".concat(e.switch_port)})(C.default.createElement(S.default,{placeholder:e.switch_port}))))),C.default.createElement(c.default,{style:{marginBottom:32}}),C.default.createElement(s.default,{gutter:24},C.default.createElement(o.default,{span:8},C.default.createElement("span",null,"\u786c\u4ef6\u4fe1\u606f"))),C.default.createElement(s.default,null,C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u670d\u52a1\u5668\u5e8f\u5217\u53f7"},K),l("serialnumber",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e8f\u5217\u53f7!"}],initialValue:"".concat(e.serialnumber)})(C.default.createElement(S.default,{placeholder:"\u8bf7\u8f93\u5165"})))),C.default.createElement(o.default,{span:8,key:1,style:{display:"block"}},C.default.createElement(A,(0,m.default)({label:"\u673a\u5668\u8d2d\u4e70\u65f6\u95f4"},K),l("start_guaratee",{initialValue:(0,Y.default)(e.start_guaratee).isBefore("2006-05-16")?(0,Y.default)("2018-05-01",T):(0,Y.default)("".concat(e.start_guaratee),T)})(C.default.createElement(i.default,{format:T,onChange:a.newDateChange.bind((0,V.default)((0,V.default)(a)))})))),C.default.createElement(o.default,{span:8,key:2,style:{display:"block"}},C.default.createElement(A,(0,m.default)({label:"\u673a\u5668\u6700\u540e\u7ef4\u4fdd"},K),l("stop_guaratee",{initialValue:(0,Y.default)(e.start_guaratee).isBefore("2006-05-16")?(0,Y.default)("2018-05-02",T):(0,Y.default)("".concat(e.stop_guaratee),T)})(C.default.createElement(i.default,{onChange:a.oldDateChange.bind((0,V.default)((0,V.default)(a)))}))))),C.default.createElement(s.default,null,C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u670d\u52a1\u5668\u751f\u4ea7\u5546"},K),l("hardware_vendor",{initialValue:"".concat(e.hardware_vendor)})(C.default.createElement(S.default,null)))),C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u670d\u52a1\u5668\u578b\u53f7"},K),l("manufacturer",{initialValue:"".concat(e.manufacturer)})(C.default.createElement(S.default,null)))),C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"CPU \u53c2\u6570"},K),l("cpu_model",{initialValue:"".concat(e.cpu_model)})(C.default.createElement(S.default,null))))),C.default.createElement(s.default,null,C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"CPU\u67b6\u6784"},K),l("cpuarch",{initialValue:"".concat(e.cpuarch)})(C.default.createElement(S.default,null)))),C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"CPU\u6838\u6570"},K),l("num_cpus",{initialValue:"".concat(e.num_cpus)})(C.default.createElement(r.default,null)))),C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u786c\u76d8\u8be6\u60c5"},K),l("disk",{initialValue:"".concat(e.disk)})(C.default.createElement(S.default,null))))),C.default.createElement(s.default,{gutter:24},C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u8d44\u4ea7\u7f16\u53f7"},K),l("assets_number",{initialValue:"".concat(e.assets_number)})(C.default.createElement(S.default,null)))),C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u5feb\u901f\u670d\u52a1\u7801"},K),l("service_code",{initialValue:"".concat(e.service_code)})(C.default.createElement(S.default,null)))),C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u5185\u5b58\u8be6\u60c5"},K),l("memory",{initialValue:"".concat(e.memory)})(C.default.createElement(S.default,null))))),C.default.createElement(s.default,{gutter:24},C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u673a\u623f\u9009\u62e9"},K),l("idc_id",{rules:[{required:!0,message:"\u8bf7 \u9009\u62e9\u673a\u623f\u9009\u62e9!"}],initialValue:"".concat(e.idc_title)})(C.default.createElement(v.default,{style:{width:200,marginRight:40},onChange:a.handleIdcChange},E)))),C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u673a\u67dc\u9009\u62e9"},K),l("cabinet_id",{initialValue:"".concat(e.cabinet_title)})(C.default.createElement(v.default,{style:{width:200,marginRight:40},onChange:a.handlecabinetChange},t)))),C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u673a\u67b6\u9009\u62e9"},K),l("bay_id",{initialValue:"".concat(e.bays_title)})(C.default.createElement(v.default,{style:{width:200,marginRight:40}},b))))),C.default.createElement(c.default,{style:{marginBottom:32}}),C.default.createElement(s.default,{gutter:24},C.default.createElement(o.default,{span:8},C.default.createElement("span",null,"\u8f6f\u4ef6\u4fe1\u606f"))),C.default.createElement(s.default,null,C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c"},K),l("osversion",{initialValue:"".concat(e.osrelease)}),e.osrelease)),C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"bios\u7248\u672c"},K),e.biosversion)),C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"agent\u7248\u672c"},K),e.agent_version))),C.default.createElement(s.default,null,C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u5957\u9910\u4fe1\u606f"},K),l("planversion",{initialValue:"".concat(e.composeplan)})(C.default.createElement(v.default,{style:{width:200,marginRight:40}},_))))),C.default.createElement(c.default,{style:{marginBottom:32}}),C.default.createElement(s.default,{gutter:24},C.default.createElement(o.default,{span:8},C.default.createElement("span",null,"\u6743\u9650\u4fe1\u606f"))),C.default.createElement(s.default,null,C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u673a\u5668\u7ba1\u7406\u5458"},K),l("user_manger",{initialValue:"".concat(e.user)})(C.default.createElement(v.default,{style:{width:200,marginRight:40},size:"default"},y)))),C.default.createElement(o.default,{span:8},C.default.createElement(A,(0,m.default)({label:"\u5bc6\u7801"},K),"*******(\u8bf7\u5355\u72ec\u4fee\u6539)"))),C.default.createElement(c.default,{style:{marginBottom:32}}),C.default.createElement("div",{className:H.default.title},"\u9879\u76ee\u4fe1\u606f"),C.default.createElement(s.default,{gutter:24},C.default.createElement(j.default,{hostid:a.state.hostid,projectlist:a.state.projectlist,dispatch:a.props.dispatch,gproline:a.props.gproline,handleSaveProData:a.handleSaveProData,handleDeleteProData:a.handleDeleteProData})),C.default.createElement(c.default,{style:{marginBottom:32}}),C.default.createElement(s.default,{gutter:24},C.default.createElement(o.default,null,C.default.createElement(A,{label:"\u5907\u6ce8"},l("remarks",{initialValue:"".concat(e.remarks)})(C.default.createElement(M,{style:{minHeight:32},placeholder:"\u5907\u6ce8\u63cf\u8ff0",rows:4}))))),C.default.createElement(s.default,null,C.default.createElement(o.default,{span:24,style:{textAlign:"right"}},C.default.createElement(d.default,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4"),C.default.createElement(c.default,{type:"vertical"}),C.default.createElement(d.default,{onClick:function(){return a.reback()}},"\u8fd4\u56de")))))},a.onChange=function(e){a.setState({activeKey:e})},a.onEdit=function(e,t){a[t](e)},a.reback=function(){var e=a.props,t=e.dispatch,l=(e.match,a.state.activeKey),u=a.state.panes.filter(function(e){return e.key!==l});a.setState({panes:u}),t(q.routerRedux.push({pathname:"/resource/hardware/host/list"}))},a.remove=function(e){var t,l=a.state.activeKey;a.state.panes.forEach(function(a,l){a.key===e&&(t=l-1)});var u=a.state.panes.filter(function(t){return t.key!==e});t>=0&&l===e&&(l=u[t].key),a.setState({panes:u,activeKey:l})},a}return(0,_.default)(t,e),(0,E.default)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.dispatch,l=t.location,u=this.state,n=u.headlist,d=u.panes;l.hasOwnProperty("query")&&(a({type:"gdevice/queryHostDetail",payload:{id:l.query.id,cb:function(t){if(0!==Object.keys(t).length){var a="".concat(t.detail_id),l=t.fqdn;e.isInArray(n,l)||(n.push(l),d.push({information:t,key:"".concat(a),title:l})),e.setState({panes:d,headlist:n,activeKey:a,projectlist:t.projectlists,hostid:e.props.location.query.id})}2==t.status.host_status_id?e.setState({haspower:!0}):e.setState({haspower:!1})}}}),a({type:"gidc/queryIdcRelation",payload:"?tag=idc"}),a({type:"gproline/getProjectLine"}),a({type:"ghardware/queryHardwarePlan"}),a({type:"gdevice/queryUser"}))}},{key:"newDateChange",value:function(e,t){var a=this.props.form,l=new Date(a.getFieldValue("stop_guaratee")?a.getFieldValue("stop_guaratee"):""),u=new Date(t);"Invalid Date"!=l&&l-u>0?this.setState({dateStatus:!0}):"Invalid Date"!=l&&l-u<0&&(this.setState({dateStatus:!1}),h.default.error("Please confirm that the maintenance time is greater than the purchase time!"))}},{key:"oldDateChange",value:function(e,t){var a=this.props.form,l=new Date(a.getFieldValue("start_guaratee")?a.getFieldValue("start_guaratee"):""),u=new Date(t);"Invalid Date"!=l&&u-l>0?this.setState({dateStatus:!0}):"Invalid Date"!=l&&u-l<0&&(this.setState({dateStatus:!1}),h.default.error("Please confirm that the maintenance time is greater than the purchase time!"))}},{key:"render",value:function(){var e=this;return console.log("projectids",x),C.default.createElement(k.default,{hideAdd:!0,onChange:this.onChange,activeKey:this.state.activeKey,type:"editable-card",onEdit:this.onEdit},this.state.panes.map(function(t){return C.default.createElement(R,{tab:t.title,key:t.key},e.tabcontent(t.information))}))}}]),t}(C.Component))||I)||I);t.default=O}}]);