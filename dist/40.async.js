(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"70nd":function(e,t,a){e.exports={tableList:"antd-pro-gcmdb-ui-src-pages-g-project-progroup-projectgroup-tableList",tableListOperator:"antd-pro-gcmdb-ui-src-pages-g-project-progroup-projectgroup-tableListOperator",tableListForm:"antd-pro-gcmdb-ui-src-pages-g-project-progroup-projectgroup-tableListForm",submitButtons:"antd-pro-gcmdb-ui-src-pages-g-project-progroup-projectgroup-submitButtons"}},Dk8d:function(e,t,a){"use strict";var l=a("VY4n"),n=a("0ZgE");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ggfa");var r=n(a("M+wZ"));a("840F");var d=n(a("6eYs"));a("8EHj");var i=n(a("6xKx"));a("pdEl");var u=n(a("0Hx8")),o=n(a("U2oY")),s=n(a("bVKW")),c=n(a("TFzq")),f=n(a("DEU0")),p=n(a("+hkI")),h=n(a("54rf")),m=n(a("oHNe"));a("0lkx");var g=n(a("gEKc"));a("6ASg");var v=n(a("pKc7")),b=l(a("bRCM")),y=(n(a("I9Uw")),n(a("ugpy"))),E=v.default.Option,k=function(e){var t=e.editable,a=e.value,l=e.onChange;return b.default.createElement("div",null,t?b.default.createElement(g.default,{style:{margin:"-5px 0"},value:a,onChange:function(e){return l(e.target.value)}}):a)},w=function(e){function t(){var e,a;(0,c.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,p.default)(this,(e=(0,h.default)(t)).call.apply(e,[this].concat(n))),a.state={selectedRowKeys:[],totalCallNo:0,data:[]},a.handleRowSelectChange=function(e,t){var l=t.reduce(function(e,t){return e+parseFloat(t.callNo,10)},0);a.props.onSelectRow&&a.props.onSelectRow(t),a.setState({selectedRowKeys:e,totalCallNo:l})},a.handleTableChange=function(e,t,l){a.props.onChange(e,t,l)},a.cleanSelectedKeys=function(){a.handleRowSelectChange([],[])},a}return(0,m.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){0===e.selectedRows.length&&this.setState({selectedRowKeys:[],totalCallNo:0}),this.setState({data:e.progroupdata.data.map(function(e){return void 0==e.selectStatus&&(e.selectStatus=!0),e})})}},{key:"renderColumns",value:function(e,t,a){var l=this;return b.default.createElement(k,{editable:t.editable,value:e,onChange:function(e){return l.handleChange(e,t.ID,a)}})}},{key:"edit",value:function(e){var t=(0,s.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(a.editable=!0,this.setState({data:t.map(function(t){return e==t.ID&&(t.selectStatus=!1),t}),disabled:!1}))}},{key:"save",value:function(e){var t=(0,s.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(delete a.editable,a.enable=this.state.status,this.setState({data:t.map(function(t){return e==t.ID&&(t.selectStatus=!0),t}),disabled:!0}),this.cacheData=t.map(function(e){return(0,o.default)({},e)}),this.props.handleSaveData(a))}},{key:"cancel",value:function(e){var t=(0,s.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(Object.assign(a,this.cacheData.filter(function(t){return e===t.ID})[0]),delete a.editable,this.setState({data:t.map(function(t){return e==t.ID&&(t.selectStatus=!0),t}),disabled:!0}))}},{key:"askdelete",value:function(e){var t=(0,s.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(a.deleteable=!0,this.setState({data:t}))}},{key:"confirmdelete",value:function(e){var t=(0,s.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];if(a){var l=t.indexOf(a);l>-1&&t.splice(l,1),a.tag=!1,this.setState({data:t}),this.cacheData=t.map(function(e){return(0,o.default)({},e)}),this.props.handleDeleteData(a)}}},{key:"handleChange",value:function(e,t,a){var l=(0,s.default)(this.state.data),n=l.filter(function(e){return t===e.ID})[0];n&&(n[a]=e,this.setState({data:l,disabled:!1}))}},{key:"handleSelectLineValue",value:function(e,t,a){var l=(0,s.default)(this.state.data),n=l.filter(function(e){return t===e.ID})[0];n&&(n[a]=e,this.setState({data:l,disabled:!1}),this.props.dispatch({type:"gproline/getProjectGroupbyId",payload:e}))}},{key:"canceldelete",value:function(e){var t=(0,s.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(Object.assign(a,this.cacheData.filter(function(t){return e===t.ID})[0]),delete a.deleteable,this.setState({data:t}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRowKeys,l=(t.totalCallNo,t.data),n=this.props,s=n.loading,c=n.prolinedata,f=[{title:"项目组别名(英文)",dataIndex:"alias",key:"alias",width:"120px",render:function(t,a){return e.renderColumns(t,a,"alias")}},{title:"项目组名称(中文)",dataIndex:"title",key:"title",width:"200px",render:function(t,a){return e.renderColumns(t,a,"title")}},{title:"产品线名称(中文)",dataIndex:"line_title",key:"line_title",width:"120px",render:function(t,a){var l=c.data.map(function(e){return b.default.createElement(E,{key:e.ID,value:e.ID},e.title)});return b.default.createElement(v.default,{defaultValue:a.line.title,disabled:a.selectStatus,style:{width:"100%"},onChange:function(t){return e.handleSelectLineValue(t,a.ID,"line_id")}},l)}},{title:"占用服务器数量",dataIndex:"host_nums",key:"host_nums",width:"200px",render:function(e,t){var a=(t.created_at,{color:"#4B0082",textAlign:"center"});return b.default.createElement("div",{style:a},t.host_nums)}},{title:"创建时间",dataIndex:"created_at",width:"8%",render:function(e,t){var a=t.created_at,l={color:"red"};return b.default.createElement("div",{style:l},a.substr(0,10))}},{title:"最近更新",dataIndex:"updated_at",width:"8%",render:function(e,t){var a=t.updated_at,l={color:"red"};return b.default.createElement("div",{style:l},a.substr(0,10))}},{title:"简要说明",dataIndex:"remarks",key:"remarks",width:"200px",render:function(t,a){return e.renderColumns(t,a,"remarks")}},{title:"操作",dataIndex:"ID",key:"ID",width:"200px",render:function(t,a){var l=a.editable,n=a.deleteable;return b.default.createElement("div",{className:"editable-row-operations"},!n&&(l?b.default.createElement("span",null,b.default.createElement("a",{onClick:function(){return e.save(a.ID)}},"保存"),b.default.createElement(u.default,{type:"vertical"}),b.default.createElement(i.default,{title:"确定取消?",onConfirm:function(){return e.cancel(a.ID)}},b.default.createElement("a",null,"取消"))):b.default.createElement("span",null,b.default.createElement("a",{onClick:function(){return e.edit(a.ID)}},"编辑"))),!l&&(n?b.default.createElement("span",null,b.default.createElement(i.default,{title:"确定删除?",onConfirm:function(){return e.confirmdelete(a.ID)}},b.default.createElement("a",null,"提交")),b.default.createElement(u.default,{type:"vertical"}),b.default.createElement("a",{onClick:function(){return e.canceldelete(a.ID)}},"取消")):b.default.createElement("span",{style:{marginLeft:10}},b.default.createElement("a",{onClick:function(){return e.askdelete(a.ID)}},"删除"))))}}],p={showSizeChanger:!0,showQuickJumper:!0},h={selectedRowKeys:a,onChange:this.handleRowSelectChange,getCheckboxProps:function(e){return{disabled:e.disabled}}};return this.cacheData=this.state.data.map(function(e){return(0,o.default)({},e)}),b.default.createElement("div",{className:y.default.standardTable},b.default.createElement("div",{className:y.default.tableAlert},b.default.createElement(d.default,{message:b.default.createElement("div",null,"已选择 ",b.default.createElement("a",{style:{fontWeight:600}},a.length)," 个项目 ",b.default.createElement("a",{onClick:this.cleanSelectedKeys,style:{marginLeft:24}},"取消勾选")),type:"info",showIcon:!0})),b.default.createElement(r.default,{loading:s,rowKey:function(e){return e.ID},rowSelection:h,dataSource:l,columns:f,pagination:p,onChange:this.handleTableChange}))}}]),t}(b.PureComponent),D=w;t.default=D},JrKA:function(e,t,a){"use strict";var l=a("0ZgE"),n=a("VY4n");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("NG6T");var r=l(a("uZXS")),d=l(a("+wDg"));a("3PXm");var i=l(a("m2aW")),u=l(a("TFzq")),o=l(a("DEU0")),s=l(a("+hkI")),c=l(a("54rf")),f=l(a("oHNe"));a("YJ5n");var p=l(a("Vb+q"));a("0lkx");var h=l(a("gEKc"));a("6ASg");var m=l(a("pKc7"));a("M50D");var g,v,b,y=l(a("5Zb7")),E=n(a("bRCM")),k=a("rAnT"),w=(l(a("70nd")),y.default.Item),D=m.default.Option,S=h.default.TextArea,C=(p.default.Group,g=(0,k.connect)(function(e){return e}),v=y.default.create(),g(b=v(b=function(e){function t(){var e,a;(0,u.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,s.default)(this,(e=(0,c.default)(t)).call.apply(e,[this].concat(n))),a.state={modalVisible:a.props.visible,showFormProline:!0,valueProline:2,selectedLineValue:"选择产品线"},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.handleAdd=function(){var e=a.props.form;e.validateFields(function(e){});var t=null;t=a.state.selectedLineValue,console.log("lineid:",t);var l={title:e.getFieldValue("title")?e.getFieldValue("title"):"",alias:e.getFieldValue("alias")?e.getFieldValue("alias"):"",remarks:e.getFieldValue("remarks")?e.getFieldValue("remarks"):"",line:t};a.props.dispatch({type:"gproline/addProjectgroup",payload:{description:l}}),a.setState({modalVisible:!1}),e.resetFields()},a.handleLineStatus=function(e){1==e.target.value?a.setState({showFormProline:!1,valueProline:e.target.value}):a.setState({showFormProline:!0,valueProline:e.target.value})},a.handleSelectLineValue=function(e){a.setState({selectedLineValue:e})},a}return(0,f.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)({type:"gproline/getProjectLine"})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props,l=(a.submitting,a.form,a.dispatch,a.gproline),n={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}};return E.default.createElement("div",{style:{float:"left"}},E.default.createElement(i.default,{type:"primary",icon:"plus",onClick:function(){return e.handleModalVisible(!0)}},"添加项目组"),E.default.createElement(r.default,{title:"添加产品线",visible:this.state.modalVisible,onOk:this.handleAdd,width:600,onCancel:function(){return e.handleModalVisible()}},E.default.createElement(w,(0,d.default)({},n,{label:"所属产品线"}),t("selectline")(E.default.createElement(m.default,{style:{width:120},showSearch:!0,placeholder:"选择产品线",onChange:this.handleSelectLineValue,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},l.prolinedata.data.length>0&&l.prolinedata.data.map(function(e){return E.default.createElement(D,{key:e.ID,value:e.ID},e.title)})))),E.default.createElement(w,(0,d.default)({},n,{label:"项目组名称"}),t("title",{rules:[{required:!0,message:"请输入项目组名称"}]})(E.default.createElement(h.default,{placeholder:"请输入项目组名称"}))),E.default.createElement(w,(0,d.default)({},n,{label:"项目组别名"}),t("alias",{rules:[{}]})(E.default.createElement(h.default,{placeholder:"请输入项目组别名，使用saltstack时需使用，请使用英文"}))),E.default.createElement(w,(0,d.default)({},n,{label:"项目组用途描述"}),t("remarks",{rules:[{required:!0,message:"请简要描述项目组用途"}]})(E.default.createElement(S,{style:{minHeight:32},placeholder:"",rows:4}))),E.default.createElement(w,(0,d.default)({},n,{label:"排序"}),t("order",{rules:[{}]})(E.default.createElement(h.default,{placeholder:"-99排序为最高，生成tree时使用"})))))}}]),t}(E.PureComponent))||b)||b);t.default=C},YNqp:function(e,t,a){"use strict";var l=a("0ZgE"),n=a("VY4n");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("UsS6");var r=l(a("xqAZ"));a("pdEl");var d=l(a("0Hx8"));a("sL9k");var i=l(a("BlmP"));a("hjcW");var u=l(a("Tmqy")),o=l(a("U2oY")),s=l(a("TFzq")),c=l(a("DEU0")),f=l(a("+hkI")),p=l(a("54rf")),h=l(a("oHNe"));a("0lkx");var m=l(a("gEKc"));a("6ASg");var g,v,b=l(a("pKc7")),y=n(a("bRCM")),E=a("rAnT"),k=l(a("Dk8d")),w=l(a("70nd")),D=l(a("JrKA")),S=(b.default.Option,function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")}),C=(m.default.TextArea,(g=(0,E.connect)(function(e){return e}))(v=function(e){function t(){var e,a;(0,s.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,f.default)(this,(e=(0,p.default)(t)).call.apply(e,[this].concat(n))),a.state={expandForm:!1,selectedRows:[],formValues:{}},a.handleStandardTableChange=function(e,t,l){var n=a.props.dispatch,r=a.state.formValues,d=Object.keys(t).reduce(function(e,a){var l=(0,o.default)({},e);return l[a]=S(t[a]),l},{}),i=(0,o.default)({currentPage:e.current,pageSize:e.pageSize},r,d);l.field&&(i.sorter="".concat(l.field,"_").concat(l.order)),n({type:"gproline/getProjectGroup"})},a.toggleForm=function(){a.setState({expandForm:!a.state.expandForm})},a.handleMenuClick=function(e){var t=a.props.dispatch,l=a.state.selectedRows;if(l)switch(e.key){case"remove":t({type:"gproline/getProjectGroup",payload:{no:l.map(function(e){return e.no}).join(",")},callback:function(){a.setState({selectedRows:[]})}})}},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSaveData=function(e){var t=e.ID,l=e.title,n=e.alias,r=e.remarks,d=e.line_id,i={ID:t,title:l,alias:n,remarks:r,line_id:d};a.props.dispatch({type:"gproline/modifyProjectgroup",payload:i})},a.handleDeleteData=function(e){console.log(e);var t=e.ID,l={},n=[];n.push(t),l.ids=n,a.props.dispatch({type:"gproline/deleteProjectgroup",payload:{tag:!1,infolist:JSON.stringify(l)}})},a}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"gproline/getProjectGroup"}),e({type:"gproline/getProjectLine"})}},{key:"render",value:function(){var e=this.state,t=e.selectedRows,a=(e.modalVisible,e.addInputValue,this.props),l=a.gproline,n=(a.loading,a.submitting,a.dispatch);return y.default.createElement(r.default,{bordered:!1},y.default.createElement("div",{className:w.default.tableList},y.default.createElement("div",{className:w.default.tableListOperator},y.default.createElement(i.default,{gutter:16},y.default.createElement(u.default,{span:2},y.default.createElement(D.default,null)),y.default.createElement(u.default,{span:2}))),y.default.createElement(d.default,null," 项目组列表 "),y.default.createElement(k.default,{selectedRows:t,dispatch:n,handleSaveData:this.handleSaveData,handleDeleteData:this.handleDeleteData,progroupdata:l.progroupdata,prolinedata:l.prolinedata,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange})))}}]),t}(y.PureComponent))||v);t.default=C},ugpy:function(e,t,a){e.exports={standardTable:"antd-pro-gcmdb-ui-src-components-project-table-pro-group-index-standardTable",tableAlert:"antd-pro-gcmdb-ui-src-components-project-table-pro-group-index-tableAlert"}}}]);