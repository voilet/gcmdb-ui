(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[39],{"/SrW":function(e,t,a){"use strict";var l=a("4Gf+"),r=a("GyWo");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("DxMX");var d=l(a("ivY1"));a("9E1Q");var s=l(a("VtQk"));a("P7WH");var i=l(a("KVOY"));a("sbpV");var n=l(a("yPMy"));a("qhfc");var o=l(a("aEti"));a("CKBq");var u=l(a("nvQ8"));a("sXvm");var p=l(a("0WXq"));a("cqzp");var c=l(a("fMIj")),h=l(a("OjS7"));a("oeOs");var f=l(a("AXz3"));a("B5iR");var m=l(a("c0J2"));a("62OL");var g,v,b,y=l(a("lZ5B")),E=r(a("ZS5U")),S=a("rAnT"),C=l(a("pexS")),D=l(a("mR73")),I=l(a("21Zr")),w=(y.default.Item,m.default.Option,e=>Object.keys(e).map(t=>e[t]).join(",")),k=(f.default.TextArea,g=(0,S.connect)(e=>e),v=y.default.create(),g(b=v(b=class extends E.PureComponent{constructor(){super(...arguments),this.state={expandForm:!1,selectedRows:[],formValues:{}},this.handleStandardTableChange=((e,t,a)=>{var l=this.props.dispatch,r=this.state.formValues,d=Object.keys(t).reduce((e,a)=>{var l=(0,h.default)({},e);return l[a]=w(t[a]),l},{}),s=(0,h.default)({currentPage:e.current,pageSize:e.pageSize},r,d);a.field&&(s.sorter=`${a.field}_${a.order}`),l({type:"gproline/getProjectList",payload:s})}),this.handleRefreshTableChange=(()=>{var e=this.props.dispatch;e({type:"gproline/getProjectLine",payload:""})}),this.handleFormReset=(()=>{var e=this.props,t=e.form,a=e.dispatch;t.resetFields(),this.setState({formValues:{}}),a({type:"gproline/getProjectList",payload:{}})}),this.toggleForm=(()=>{this.setState({expandForm:!this.state.expandForm})}),this.handleMenuClick=(e=>{var t=this.props.dispatch,a=this.state.selectedRows;if(a)switch(console.log(a),e.key){case"remove":t({type:"gproline/getProjectLine",payload:{ID:a.map(e=>e.ID).join(",")},callback:()=>{this.setState({selectedRows:[]})}});break;case"approval":t({type:"gproline/getProjectLine",payload:{ID:a.map(e=>e.ID).join(",")},callback:()=>{this.setState({selectedRows:[]})}});case"stop":t({type:"gproline/getProjectLine",payload:{ID:a.map(e=>e.ID).join(",")},callback:()=>{this.setState({selectedRows:[]})}});default:break}}),this.handleSelectRows=(e=>{this.setState({selectedRows:e})}),this.handleSaveData=(e=>{console.log("val",e);var t=e.ID,a=e.group_id,l=e.pro_title,r=e.line_id,d=e.pro_alias,s=e.pro_code_url,i=e.pro_enable,n=e.pro_remarks;if("-1"!=a){var o={ID:t,title:l,alias:d,remarks:n,code_url:s,enable:i,groupid:a,lineid:r};this.props.dispatch({type:"gproline/modifyProject",payload:o})}else this.props.dispatch({type:"gproline/getProjectList"})}),this.handleDeleteData=(e=>{console.log(e);var t=e.ID,a={},l=[];l.push(t),a.ids=l,this.props.dispatch({type:"gproline/deleteProject",payload:{tag:!1,infolist:JSON.stringify(a)}})})}componentDidMount(){var e=this.props.dispatch;e({type:"gproline/getProjectList"}),e({type:"gproline/getProjectLine"})}render(){var e=this.state,t=e.selectedRows,a=(e.modalVisible,e.addInputValue,this.props.form.getFieldDecorator,this.props),l=a.gproline,r=(a.loading,a.submitting,a.dispatch);console.log("Parent,props",this.props);var h=E.default.createElement(c.default,{onClick:this.handleMenuClick,selectedKeys:[]},E.default.createElement(c.default.Item,{key:"remove"},"\u5220\u9664"),E.default.createElement(c.default.Item,{key:"approval"},"\u6279\u91cf\u542f\u7528"),E.default.createElement(c.default.Item,{key:"stop"},"\u6279\u91cf\u6682\u505c"));return E.default.createElement(d.default,{bordered:!1},E.default.createElement("div",{className:D.default.tableList},E.default.createElement("div",{className:D.default.tableListOperator},E.default.createElement(i.default,{gutter:16},E.default.createElement(p.default,{span:2},E.default.createElement(I.default,null)),E.default.createElement(p.default,{span:2},t.length>0&&E.default.createElement("span",null,E.default.createElement(n.default,{overlay:h},E.default.createElement(o.default,null,"\u66f4\u591a\u64cd\u4f5c ",E.default.createElement(u.default,{type:"down"}))))))),E.default.createElement(s.default,null," \u9879\u76ee\u5217\u8868 "),E.default.createElement(C.default,{selectedRows:t,dispatch:r,handleSaveData:this.handleSaveData,handleDeleteData:this.handleDeleteData,prolinedata:l.prolinedata,progroupbylid:l.progroupbylid,prodata:this.props.gproline.projectdata,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange})))}})||b)||b);t.default=k},"21Zr":function(e,t,a){"use strict";var l=a("4Gf+"),r=a("GyWo");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("5QNv");var d=l(a("XRPJ"));a("PRxM");var s=l(a("C5on")),i=l(a("RSNA"));a("qhfc");var n=l(a("aEti"));a("Vvjs");var o=l(a("66S2"));a("aslW");var u=l(a("b+b+"));a("oeOs");var p=l(a("AXz3"));a("B5iR");var c=l(a("c0J2"));a("62OL");var h,f,m,g=l(a("lZ5B")),v=r(a("ZS5U")),b=a("rAnT"),y=(l(a("mR73")),g.default.Item),E=c.default.Option,S=p.default.TextArea,C=(u.default.Group,h=(0,b.connect)(e=>e),f=g.default.create(),h(m=f(m=class extends v.PureComponent{constructor(){super(...arguments),this.state={modalVisible:this.props.visible,showFormProline:!0,selectedGroupValue:0,enable:!0},this.handleModalVisible=(e=>{var t=this.props.form;t.resetFields(),this.setState({modalVisible:!!e})}),this.handleAdd=(()=>{var e=this.props.form;e.validateFields(e=>{});var t={title:e.getFieldValue("title")?e.getFieldValue("title"):"",alias:e.getFieldValue("alias")?e.getFieldValue("alias"):"",order:e.getFieldValue("order")?e.getFieldValue("order"):"",code_url:e.getFieldValue("code_url")?e.getFieldValue("code_url"):"",remarks:e.getFieldValue("remarks")?e.getFieldValue("remarks"):"",enable:this.state.enable,group:this.state.selectedGroupValue};this.props.dispatch({type:"gproline/addProject",payload:{description:t}}),o.default.success("\u6dfb\u52a0\u6210\u529f"),this.setState({modalVisible:!1}),e.resetFields()}),this.handleSelectLineValue=(e=>{console.log(e),this.props.dispatch({type:"gproline/getProjectGroupbyId",payload:e})}),this.handleSelectGroupValue=(e=>{this.setState({selectedGroupValue:e})}),this.handleStatusChange=(e=>{this.setState({enable:e})})}render(){var e=this.props.form.getFieldDecorator,t=this.props,a=(t.submitting,t.form,t.dispatch,t.progroupdata,t.gproline);console.log("addproject",this.props.gproline);var l={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}};return v.default.createElement("div",null,v.default.createElement(n.default,{type:"primary",icon:"plus",onClick:()=>this.handleModalVisible(!0)},"\u6dfb\u52a0\u9879\u76ee"),v.default.createElement(d.default,{title:"\u6dfb\u52a0\u9879\u76ee",visible:this.state.modalVisible,onOk:this.handleAdd,width:600,onCancel:()=>this.handleModalVisible()},v.default.createElement(y,(0,i.default)({},l,{label:"\u6240\u5c5e\u4ea7\u54c1\u7ebf"}),e("selectline")(v.default.createElement(c.default,{style:{width:120},showSearch:!0,placeholder:"\u9009\u62e9\u4ea7\u54c1\u7ebf",onChange:this.handleSelectLineValue,optionFilterProp:"children",filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},a.prolinedata.data.length>0&&a.prolinedata.data.map(e=>{return v.default.createElement(E,{key:e.ID,value:e.ID},e.title)})))),v.default.createElement(y,(0,i.default)({},l,{label:"\u6240\u5c5e\u9879\u76ee\u7ec4"}),e("selectgroup")(v.default.createElement(c.default,{showSearch:!0,placeholder:"\u9009\u62e9\u9879\u76ee\u7ec4",style:{width:120},onSelect:this.handleSelectGroupValue,optionFilterProp:"children",filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},a.progroupbylid.length>0&&a.progroupbylid.map(e=>v.default.createElement(E,{key:e.ID,value:e.ID},e.title))))),v.default.createElement(y,(0,i.default)({},l,{label:"\u9879\u76ee\u540d\u79f0"}),e("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0"}]})(v.default.createElement(p.default,{placeholder:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0"}))),v.default.createElement(y,(0,i.default)({},l,{label:"\u9879\u76ee\u522b\u540d"}),e("alias",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9879\u76ee\u522b\u540d"}]})(v.default.createElement(p.default,{placeholder:"\u8bf7\u8f93\u5165\u9879\u76ee\u522b\u540d\uff0c\u4f7f\u7528saltstack\u65f6\u9700\u4f7f\u7528\uff0c\u8bf7\u4f7f\u7528\u82f1\u6587"}))),v.default.createElement(y,(0,i.default)({},l,{label:"\u4ee3\u7801\u4ed3\u5e93"}),e("code_url",{rules:[{}]})(v.default.createElement(p.default,{placeholder:"\u8bf7\u8f93\u5165git\u6216svn\u5730\u5740"}))),v.default.createElement(y,(0,i.default)({},l,{label:"\u4e1a\u52a1\u76f8\u5173\u63cf\u8ff0"}),e("remarks",{rules:[{required:!0,message:"\u8bf7\u7b80\u8981\u63cf\u8ff0\u4e1a\u52a1"}]})(v.default.createElement(S,{style:{minHeight:32},placeholder:"",rows:4}))),v.default.createElement(y,(0,i.default)({},l,{label:"\u9879\u76ee\u72b6\u6001"}),e("enable")(v.default.createElement(s.default,{checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed",checked:this.state.enable,onChange:e=>this.handleStatusChange(e)}))),v.default.createElement(y,(0,i.default)({},l,{label:"\u6392\u5e8f"}),e("order",{rules:[{}]})(v.default.createElement(p.default,{placeholder:"-99\u6392\u5e8f\u4e3a\u6700\u9ad8\uff0c\u751f\u6210tree\u65f6\u4f7f\u7528"})))))}})||m)||m);t.default=C},mR73:function(e,t,a){e.exports={tableList:"antd-pro-pages-g-project-project-project-tableList",tableListOperator:"antd-pro-pages-g-project-project-project-tableListOperator",tableListForm:"antd-pro-pages-g-project-project-project-tableListForm",submitButtons:"antd-pro-pages-g-project-project-project-submitButtons"}},pexS:function(e,t,a){"use strict";var l=a("GyWo"),r=a("4Gf+");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("z4Cl");var d=r(a("L9Tq"));a("fr3b");var s=r(a("Bziu"));a("jYJC");var i=r(a("47AH"));a("9E1Q");var n=r(a("VtQk"));a("PRxM");var o=r(a("C5on")),u=r(a("OjS7"));a("oeOs");var p=r(a("AXz3"));a("B5iR");var c=r(a("c0J2")),h=l(a("ZS5U")),f=(r(a("I9Uw")),r(a("vIdK"))),m=c.default.Option,g=e=>{var t=e.editable,a=e.value,l=e.onChange;return h.default.createElement("div",null,t?h.default.createElement(p.default,{style:{margin:"-5px 0"},value:a,onChange:e=>l(e.target.value)}):a)};class v extends h.PureComponent{constructor(){super(...arguments),this.state={selectedRowKeys:[],totalCallNo:0,data:[],selectedLine:!1},this.handleRowSelectChange=((e,t)=>{var a=t.reduce((e,t)=>{return e+parseFloat(t.callNo,10)},0);this.props.onSelectRow&&this.props.onSelectRow(t),this.setState({selectedRowKeys:e,totalCallNo:a})}),this.handleTableChange=((e,t,a)=>{this.props.onChange(e,t,a)}),this.cleanSelectedKeys=(()=>{this.handleRowSelectChange([],[])})}componentWillReceiveProps(e){0===e.selectedRows.length&&this.setState({selectedRowKeys:[],totalCallNo:0}),e.prodata.data&&this.setState({data:e.prodata.data.map(e=>{return void 0==e.selectStatus&&(e.selectStatus=!0),e})})}renderColumns(e,t,a){return h.default.createElement(g,{editable:t.editable,value:e,onChange:e=>this.handleChange(e,t.ID,a)})}edit(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];a&&(a.editable=!0,this.setState({data:t.map(t=>{return e==t.ID&&(t.selectStatus=!1),t}),disabled:!1}))}save(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];a&&(delete a.editable,a.enable=this.state.status,this.setState({data:t.map(t=>{return e==t.ID&&(t.selectStatus=!0),t}),disabled:!0}),this.cacheData=t.map(e=>(0,u.default)({},e)),this.props.handleSaveData(a))}cancel(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];a&&(Object.assign(a,this.cacheData.filter(t=>e===t.ID)[0]),delete a.editable,this.setState({data:t.map(t=>{return e==t.ID&&(t.selectStatus=!0),t}),disabled:!0}))}askdelete(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];a&&(a.deleteable=!0,this.setState({data:t}))}confirmdelete(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];if(a){var l=t.indexOf(a);l>-1&&t.splice(l,1),a.tag=!1,this.setState({data:t}),this.cacheData=t.map(e=>(0,u.default)({},e)),this.props.handleDeleteData(a)}}handleChange(e,t,a){var l=[...this.state.data],r=l.filter(e=>t===e.ID)[0];r&&(r[a]=e,this.setState({data:l,disabled:!1}))}handleGroupValue(e,t,a){var l=[...this.state.data],r=l.filter(e=>t===e.ID)[0];r&&(r[a]=e.split(",")[0],r["group_title"]=e.split(",")[1],this.setState({data:l,disabled:!1}))}handleSelectLineValue(e,t,a){var l=[...this.state.data],r=l.filter(e=>t===e.ID)[0];r&&(r[a]=e,r["group_title"]="\u8bf7\u9009\u62e9",r["group_id"]="-1",this.props.dispatch({type:"gproline/getProjectGroupbyId",payload:e}),this.setState({data:l,disabled:!1,selectedLine:!0}))}canceldelete(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];a&&(Object.assign(a,this.cacheData.filter(t=>e===t.ID)[0]),delete a.deleteable,this.setState({data:t}))}render(){var e=this.state,t=e.selectedRowKeys,a=(e.totalCallNo,e.data),l=this.props,r=l.prodata,p=l.loading,g=l.progroupbylid,v=l.prolinedata,b=[{title:"\u9879\u76ee\u540d\u79f0(\u4e2d\u6587)",dataIndex:"pro_title",key:"pro_title",width:"120px",render:(e,t)=>this.renderColumns(e,t,"pro_title")},{title:"\u9879\u76ee\u522b\u540d(\u82f1\u6587)",dataIndex:"pro_alias",key:"pro_alias",width:"120px",render:(e,t)=>this.renderColumns(e,t,"pro_alias")},{title:"\u4ea7\u54c1\u7ebf\u540d\u79f0(\u4e2d\u6587)",dataIndex:"line_title",key:"line_title",width:"120px",render:(e,t)=>{var a=v.data.map(e=>{return h.default.createElement(m,{key:e.ID,value:e.ID},e.title)});return h.default.createElement(c.default,{defaultValue:e,disabled:t.selectStatus,style:{width:"auto"},onChange:e=>this.handleSelectLineValue(e,t.ID,"line_id")},a)}},{title:"\u9879\u76ee\u7ec4\u540d\u79f0(\u4e2d\u6587)",dataIndex:"group_title",key:"group_title",width:"120px",render:(e,t)=>{var a=h.default.createElement(m,{value:"disabled",disabled:!0},"Disabled");return g.length>0&&(a=g.map(e=>h.default.createElement(m,{key:e.ID,value:e.ID+","+e.title},e.title))),h.default.createElement(c.default,{value:t.group_title,disabled:t.selectStatus,style:{width:"auto"},onChange:e=>{this.handleGroupValue(e,t.ID,"group_id")}},a)}},{title:"\u4e1a\u52a1\u8bf4\u660e",dataIndex:"pro_remarks",key:"pro_remarks",width:"200px",render:(e,t)=>this.renderColumns(e,t,"pro_remarks")},{title:"\u4ed3\u5e93\u8def\u5f84",dataIndex:"pro_code_url",key:"pro_code_url",width:"150px",render:(e,t)=>this.renderColumns(e,t,"pro_code_url")},{title:"\u6392\u5e8f",dataIndex:"pro_order",key:"pro_order",width:"100px",render:(e,t)=>this.renderColumns(e,t,"pro_order")},{title:"\u72b6\u6001",dataIndex:"pro_enable",key:"pro_enable",width:"150px",render:(e,t)=>{var a=t.pro_enable;return h.default.createElement("div",null,h.default.createElement(o.default,{checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u4e0b\u7ebf",checked:a,onChange:e=>{this.handleChange(e,t.ID,"pro_enable")},disabled:t.selectStatus}))}},{title:"\u64cd\u4f5c",dataIndex:"ID",key:"ID",width:"200px",render:(e,t)=>{var a=t.editable,l=t.deleteable;return h.default.createElement("div",{className:"editable-row-operations"},!l&&(a?h.default.createElement("span",null,h.default.createElement("a",{onClick:()=>this.save(t.ID)},"\u4fdd\u5b58"),h.default.createElement(n.default,{type:"vertical"}),h.default.createElement(i.default,{title:"\u786e\u5b9a\u53d6\u6d88?",onConfirm:()=>this.cancel(t.ID)},h.default.createElement("a",null,"\u53d6\u6d88"))):h.default.createElement("span",null,h.default.createElement("a",{onClick:()=>this.edit(t.ID)},"\u7f16\u8f91"))),!a&&(l?h.default.createElement("span",null,h.default.createElement(i.default,{title:"\u786e\u5b9a\u5220\u9664?",onConfirm:()=>this.confirmdelete(t.ID)},h.default.createElement("a",null,"\u63d0\u4ea4")),h.default.createElement(n.default,{type:"vertical"}),h.default.createElement("a",{onClick:()=>this.canceldelete(t.ID)},"\u53d6\u6d88")):h.default.createElement("span",{style:{marginLeft:10}},h.default.createElement("a",{onClick:()=>this.askdelete(t.ID)},"\u5220\u9664"))))}}],y=(0,u.default)({showSizeChanger:!0,showQuickJumper:!0},r.pagination),E={selectedRowKeys:t,onChange:this.handleRowSelectChange,getCheckboxProps:e=>({disabled:e.disabled})};return this.cacheData=this.state.data.map(e=>(0,u.default)({},e)),h.default.createElement("div",{className:f.default.standardTable},h.default.createElement("div",{className:f.default.tableAlert},h.default.createElement(s.default,{message:h.default.createElement("div",null,"\u5df2\u9009\u62e9 ",h.default.createElement("a",{style:{fontWeight:600}},t.length)," \u4e2a\u9879\u76ee\xa0",h.default.createElement("a",{onClick:this.cleanSelectedKeys,style:{marginLeft:24}},"\u53d6\u6d88\u52fe\u9009")),type:"info",showIcon:!0})),h.default.createElement(d.default,{loading:p,rowKey:e=>e.ID,rowSelection:E,dataSource:a,columns:b,pagination:y,onChange:this.handleTableChange}))}}var b=v;t.default=b}}]);