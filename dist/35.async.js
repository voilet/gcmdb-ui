(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[35],{"/SrW":function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("UsS6");var r=l(a("xqAZ"));a("pdEl");var d=l(a("0Hx8"));a("sL9k");var o=l(a("BlmP"));a("1Y2U");var u=l(a("c8pg"));a("3PXm");var i=l(a("m2aW"));a("xzRB");var s=l(a("TOEs"));a("hjcW");var c=l(a("Tmqy"));a("wPR8");var p=l(a("cmPo")),f=l(a("MVZn")),h=l(a("lwsE")),m=l(a("W8MJ")),g=l(a("a1gu")),v=l(a("Nsbk")),b=l(a("7W2i"));a("0lkx");var y=l(a("gEKc"));a("6ASg");var E=l(a("pKc7"));a("M50D");var k,S,w,I=l(a("5Zb7")),D=n(a("q1tI")),C=a("MuoO"),_=l(a("pexS")),x=l(a("mR73")),j=l(a("21Zr")),V=(I.default.Item,E.default.Option,function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")}),R=(y.default.TextArea,k=(0,C.connect)(function(e){return e}),S=I.default.create(),k(w=S(w=function(e){function t(){var e,a;(0,h.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,g.default)(this,(e=(0,v.default)(t)).call.apply(e,[this].concat(n))),a.state={expandForm:!1,selectedRows:[],formValues:{}},a.handleStandardTableChange=function(e,t,l){var n=a.props.dispatch,r=a.state.formValues,d=Object.keys(t).reduce(function(e,a){var l=(0,f.default)({},e);return l[a]=V(t[a]),l},{}),o=(0,f.default)({currentPage:e.current,pageSize:e.pageSize},r,d);l.field&&(o.sorter="".concat(l.field,"_").concat(l.order)),n({type:"gproline/getProjectList",payload:o})},a.handleRefreshTableChange=function(){var e=a.props.dispatch;e({type:"gproline/getProjectLine",payload:""})},a.handleFormReset=function(){var e=a.props,t=e.form,l=e.dispatch;t.resetFields(),a.setState({formValues:{}}),l({type:"gproline/getProjectList",payload:{}})},a.toggleForm=function(){a.setState({expandForm:!a.state.expandForm})},a.handleMenuClick=function(e){var t=a.props.dispatch,l=a.state.selectedRows;if(l)switch(console.log(l),e.key){case"remove":t({type:"gproline/getProjectLine",payload:{ID:l.map(function(e){return e.ID}).join(",")},callback:function(){a.setState({selectedRows:[]})}});break;case"approval":t({type:"gproline/getProjectLine",payload:{ID:l.map(function(e){return e.ID}).join(",")},callback:function(){a.setState({selectedRows:[]})}});case"stop":t({type:"gproline/getProjectLine",payload:{ID:l.map(function(e){return e.ID}).join(",")},callback:function(){a.setState({selectedRows:[]})}});default:break}},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSaveData=function(e){console.log("val",e);var t=e.ID,l=e.group_id,n=e.pro_title,r=e.line_id,d=e.pro_alias,o=e.pro_code_url,u=e.pro_enable,i=e.pro_remarks;if("-1"!=l){var s={ID:t,title:n,alias:d,remarks:i,code_url:o,enable:u,groupid:l,lineid:r};a.props.dispatch({type:"gproline/modifyProject",payload:s})}else a.props.dispatch({type:"gproline/getProjectList"})},a.handleDeleteData=function(e){console.log(e);var t=e.ID,l={},n=[];n.push(t),l.ids=n,a.props.dispatch({type:"gproline/deleteProject",payload:{tag:!1,infolist:JSON.stringify(l)}})},a}return(0,b.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"gproline/getProjectList"}),e({type:"gproline/getProjectLine"})}},{key:"render",value:function(){var e=this.state,t=e.selectedRows,a=(e.modalVisible,e.addInputValue,this.props.form.getFieldDecorator,this.props),l=a.gproline,n=(a.loading,a.submitting,a.dispatch);console.log("Parent,props",this.props);var f=D.default.createElement(p.default,{onClick:this.handleMenuClick,selectedKeys:[]},D.default.createElement(p.default.Item,{key:"remove"},"\u5220\u9664"),D.default.createElement(p.default.Item,{key:"approval"},"\u6279\u91cf\u542f\u7528"),D.default.createElement(p.default.Item,{key:"stop"},"\u6279\u91cf\u6682\u505c"));return D.default.createElement(r.default,{bordered:!1},D.default.createElement("div",{className:x.default.tableList},D.default.createElement("div",{className:x.default.tableListOperator},D.default.createElement(o.default,{gutter:16},D.default.createElement(c.default,{span:2},D.default.createElement(j.default,null)),D.default.createElement(c.default,{span:2},t.length>0&&D.default.createElement("span",null,D.default.createElement(u.default,{overlay:f},D.default.createElement(i.default,null,"\u66f4\u591a\u64cd\u4f5c ",D.default.createElement(s.default,{type:"down"}))))))),D.default.createElement(d.default,null," \u9879\u76ee\u5217\u8868 "),D.default.createElement(_.default,{selectedRows:t,dispatch:n,handleSaveData:this.handleSaveData,handleDeleteData:this.handleDeleteData,prolinedata:l.prolinedata,progroupbylid:l.progroupbylid,prodata:this.props.gproline.projectdata,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange})))}}]),t}(D.PureComponent))||w)||w);t.default=R},"21Zr":function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("NG6T");var r=l(a("uZXS"));a("9sh3");var d=l(a("r3sT")),o=l(a("pVnL"));a("3PXm");var u=l(a("m2aW"));a("s/1u");var i=l(a("TMZs")),s=l(a("lwsE")),c=l(a("W8MJ")),p=l(a("a1gu")),f=l(a("Nsbk")),h=l(a("7W2i"));a("YJ5n");var m=l(a("Vb+q"));a("0lkx");var g=l(a("gEKc"));a("6ASg");var v=l(a("pKc7"));a("M50D");var b,y,E,k=l(a("5Zb7")),S=n(a("q1tI")),w=a("MuoO"),I=(l(a("mR73")),k.default.Item),D=v.default.Option,C=g.default.TextArea,_=(m.default.Group,b=(0,w.connect)(function(e){return e}),y=k.default.create(),b(E=y(E=function(e){function t(){var e,a;(0,s.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,p.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(n))),a.state={modalVisible:a.props.visible,showFormProline:!0,selectedGroupValue:0,enable:!0},a.handleModalVisible=function(e){var t=a.props.form;t.resetFields(),a.setState({modalVisible:!!e})},a.handleAdd=function(){var e=a.props.form;e.validateFields(function(e){});var t={title:e.getFieldValue("title")?e.getFieldValue("title"):"",alias:e.getFieldValue("alias")?e.getFieldValue("alias"):"",order:e.getFieldValue("order")?e.getFieldValue("order"):"",code_url:e.getFieldValue("code_url")?e.getFieldValue("code_url"):"",remarks:e.getFieldValue("remarks")?e.getFieldValue("remarks"):"",enable:a.state.enable,group:a.state.selectedGroupValue};a.props.dispatch({type:"gproline/addProject",payload:{description:t}}),i.default.success("\u6dfb\u52a0\u6210\u529f"),a.setState({modalVisible:!1}),e.resetFields()},a.handleSelectLineValue=function(e){console.log(e),a.props.dispatch({type:"gproline/getProjectGroupbyId",payload:e})},a.handleSelectGroupValue=function(e){a.setState({selectedGroupValue:e})},a.handleStatusChange=function(e){a.setState({enable:e})},a}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props,l=(a.submitting,a.form,a.dispatch,a.progroupdata,a.gproline);console.log("addproject",this.props.gproline);var n={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}};return S.default.createElement("div",null,S.default.createElement(u.default,{type:"primary",icon:"plus",onClick:function(){return e.handleModalVisible(!0)}},"\u6dfb\u52a0\u9879\u76ee"),S.default.createElement(r.default,{title:"\u6dfb\u52a0\u9879\u76ee",visible:this.state.modalVisible,onOk:this.handleAdd,width:600,onCancel:function(){return e.handleModalVisible()}},S.default.createElement(I,(0,o.default)({},n,{label:"\u6240\u5c5e\u4ea7\u54c1\u7ebf"}),t("selectline")(S.default.createElement(v.default,{style:{width:120},showSearch:!0,placeholder:"\u9009\u62e9\u4ea7\u54c1\u7ebf",onChange:this.handleSelectLineValue,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},l.prolinedata.data.length>0&&l.prolinedata.data.map(function(e){return S.default.createElement(D,{key:e.ID,value:e.ID},e.title)})))),S.default.createElement(I,(0,o.default)({},n,{label:"\u6240\u5c5e\u9879\u76ee\u7ec4"}),t("selectgroup")(S.default.createElement(v.default,{showSearch:!0,placeholder:"\u9009\u62e9\u9879\u76ee\u7ec4",style:{width:120},onSelect:this.handleSelectGroupValue,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},l.progroupbylid.length>0&&l.progroupbylid.map(function(e){return S.default.createElement(D,{key:e.ID,value:e.ID},e.title)})))),S.default.createElement(I,(0,o.default)({},n,{label:"\u9879\u76ee\u540d\u79f0"}),t("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0"}]})(S.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0"}))),S.default.createElement(I,(0,o.default)({},n,{label:"\u9879\u76ee\u522b\u540d"}),t("alias",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9879\u76ee\u522b\u540d"}]})(S.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u9879\u76ee\u522b\u540d\uff0c\u4f7f\u7528saltstack\u65f6\u9700\u4f7f\u7528\uff0c\u8bf7\u4f7f\u7528\u82f1\u6587"}))),S.default.createElement(I,(0,o.default)({},n,{label:"\u4ee3\u7801\u4ed3\u5e93"}),t("code_url",{rules:[{}]})(S.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165git\u6216svn\u5730\u5740"}))),S.default.createElement(I,(0,o.default)({},n,{label:"\u4e1a\u52a1\u76f8\u5173\u63cf\u8ff0"}),t("remarks",{rules:[{required:!0,message:"\u8bf7\u7b80\u8981\u63cf\u8ff0\u4e1a\u52a1"}]})(S.default.createElement(C,{style:{minHeight:32},placeholder:"",rows:4}))),S.default.createElement(I,(0,o.default)({},n,{label:"\u9879\u76ee\u72b6\u6001"}),t("enable")(S.default.createElement(d.default,{checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed",checked:this.state.enable,onChange:function(t){return e.handleStatusChange(t)}}))),S.default.createElement(I,(0,o.default)({},n,{label:"\u6392\u5e8f"}),t("order",{rules:[{}]})(S.default.createElement(g.default,{placeholder:"-99\u6392\u5e8f\u4e3a\u6700\u9ad8\uff0c\u751f\u6210tree\u65f6\u4f7f\u7528"})))))}}]),t}(S.PureComponent))||E)||E);t.default=_},mR73:function(e,t,a){e.exports={tableList:"antd-pro-gcmdb-ui-src-pages-g-project-project-project-tableList",tableListOperator:"antd-pro-gcmdb-ui-src-pages-g-project-project-project-tableListOperator",tableListForm:"antd-pro-gcmdb-ui-src-pages-g-project-project-project-tableListForm",submitButtons:"antd-pro-gcmdb-ui-src-pages-g-project-project-project-submitButtons"}},pexS:function(e,t,a){"use strict";var l=a("284h"),n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ggfa");var r=n(a("M+wZ"));a("840F");var d=n(a("6eYs"));a("8EHj");var o=n(a("6xKx"));a("pdEl");var u=n(a("0Hx8"));a("9sh3");var i=n(a("r3sT")),s=n(a("MVZn")),c=n(a("RIqP")),p=n(a("lwsE")),f=n(a("W8MJ")),h=n(a("a1gu")),m=n(a("Nsbk")),g=n(a("7W2i"));a("0lkx");var v=n(a("gEKc"));a("6ASg");var b=n(a("pKc7")),y=l(a("q1tI")),E=(n(a("wd/R")),n(a("vIdK"))),k=b.default.Option,S=function(e){var t=e.editable,a=e.value,l=e.onChange;return y.default.createElement("div",null,t?y.default.createElement(v.default,{style:{margin:"-5px 0"},value:a,onChange:function(e){return l(e.target.value)}}):a)},w=function(e){function t(){var e,a;(0,p.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,h.default)(this,(e=(0,m.default)(t)).call.apply(e,[this].concat(n))),a.state={selectedRowKeys:[],totalCallNo:0,data:[],selectedLine:!1},a.handleRowSelectChange=function(e,t){var l=t.reduce(function(e,t){return e+parseFloat(t.callNo,10)},0);a.props.onSelectRow&&a.props.onSelectRow(t),a.setState({selectedRowKeys:e,totalCallNo:l})},a.handleTableChange=function(e,t,l){a.props.onChange(e,t,l)},a.cleanSelectedKeys=function(){a.handleRowSelectChange([],[])},a}return(0,g.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){0===e.selectedRows.length&&this.setState({selectedRowKeys:[],totalCallNo:0}),e.prodata.data&&this.setState({data:e.prodata.data.map(function(e){return void 0==e.selectStatus&&(e.selectStatus=!0),e})})}},{key:"renderColumns",value:function(e,t,a){var l=this;return y.default.createElement(S,{editable:t.editable,value:e,onChange:function(e){return l.handleChange(e,t.ID,a)}})}},{key:"edit",value:function(e){var t=(0,c.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(a.editable=!0,this.setState({data:t.map(function(t){return e==t.ID&&(t.selectStatus=!1),t}),disabled:!1}))}},{key:"save",value:function(e){var t=(0,c.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(delete a.editable,a.enable=this.state.status,this.setState({data:t.map(function(t){return e==t.ID&&(t.selectStatus=!0),t}),disabled:!0}),this.cacheData=t.map(function(e){return(0,s.default)({},e)}),this.props.handleSaveData(a))}},{key:"cancel",value:function(e){var t=(0,c.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(Object.assign(a,this.cacheData.filter(function(t){return e===t.ID})[0]),delete a.editable,this.setState({data:t.map(function(t){return e==t.ID&&(t.selectStatus=!0),t}),disabled:!0}))}},{key:"askdelete",value:function(e){var t=(0,c.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(a.deleteable=!0,this.setState({data:t}))}},{key:"confirmdelete",value:function(e){var t=(0,c.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];if(a){var l=t.indexOf(a);l>-1&&t.splice(l,1),a.tag=!1,this.setState({data:t}),this.cacheData=t.map(function(e){return(0,s.default)({},e)}),this.props.handleDeleteData(a)}}},{key:"handleChange",value:function(e,t,a){var l=(0,c.default)(this.state.data),n=l.filter(function(e){return t===e.ID})[0];n&&(n[a]=e,this.setState({data:l,disabled:!1}))}},{key:"handleGroupValue",value:function(e,t,a){var l=(0,c.default)(this.state.data),n=l.filter(function(e){return t===e.ID})[0];n&&(n[a]=e.split(",")[0],n["group_title"]=e.split(",")[1],this.setState({data:l,disabled:!1}))}},{key:"handleSelectLineValue",value:function(e,t,a){var l=(0,c.default)(this.state.data),n=l.filter(function(e){return t===e.ID})[0];n&&(n[a]=e,n["group_title"]="\u8bf7\u9009\u62e9",n["group_id"]="-1",this.props.dispatch({type:"gproline/getProjectGroupbyId",payload:e}),this.setState({data:l,disabled:!1,selectedLine:!0}))}},{key:"canceldelete",value:function(e){var t=(0,c.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(Object.assign(a,this.cacheData.filter(function(t){return e===t.ID})[0]),delete a.deleteable,this.setState({data:t}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRowKeys,l=(t.totalCallNo,t.data),n=this.props,c=n.prodata,p=n.loading,f=n.progroupbylid,h=n.prolinedata,m=[{title:"\u9879\u76ee\u540d\u79f0(\u4e2d\u6587)",dataIndex:"pro_title",key:"pro_title",width:"120px",render:function(t,a){return e.renderColumns(t,a,"pro_title")}},{title:"\u9879\u76ee\u522b\u540d(\u82f1\u6587)",dataIndex:"pro_alias",key:"pro_alias",width:"120px",render:function(t,a){return e.renderColumns(t,a,"pro_alias")}},{title:"\u4ea7\u54c1\u7ebf\u540d\u79f0(\u4e2d\u6587)",dataIndex:"line_title",key:"line_title",width:"120px",render:function(t,a){var l=h.data.map(function(e){return y.default.createElement(k,{key:e.ID,value:e.ID},e.title)});return y.default.createElement(b.default,{defaultValue:t,disabled:a.selectStatus,style:{width:"auto"},onChange:function(t){return e.handleSelectLineValue(t,a.ID,"line_id")}},l)}},{title:"\u9879\u76ee\u7ec4\u540d\u79f0(\u4e2d\u6587)",dataIndex:"group_title",key:"group_title",width:"120px",render:function(t,a){var l=y.default.createElement(k,{value:"disabled",disabled:!0},"Disabled");return f.length>0&&(l=f.map(function(e){return y.default.createElement(k,{key:e.ID,value:e.ID+","+e.title},e.title)})),y.default.createElement(b.default,{value:a.group_title,disabled:a.selectStatus,style:{width:"auto"},onChange:function(t){e.handleGroupValue(t,a.ID,"group_id")}},l)}},{title:"\u4e1a\u52a1\u8bf4\u660e",dataIndex:"pro_remarks",key:"pro_remarks",width:"200px",render:function(t,a){return e.renderColumns(t,a,"pro_remarks")}},{title:"\u4ed3\u5e93\u8def\u5f84",dataIndex:"pro_code_url",key:"pro_code_url",width:"150px",render:function(t,a){return e.renderColumns(t,a,"pro_code_url")}},{title:"\u6392\u5e8f",dataIndex:"pro_order",key:"pro_order",width:"100px",render:function(t,a){return e.renderColumns(t,a,"pro_order")}},{title:"\u72b6\u6001",dataIndex:"pro_enable",key:"pro_enable",width:"150px",render:function(t,a){var l=a.pro_enable;return y.default.createElement("div",null,y.default.createElement(i.default,{checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u4e0b\u7ebf",checked:l,onChange:function(t){e.handleChange(t,a.ID,"pro_enable")},disabled:a.selectStatus}))}},{title:"\u64cd\u4f5c",dataIndex:"ID",key:"ID",width:"200px",render:function(t,a){var l=a.editable,n=a.deleteable;return y.default.createElement("div",{className:"editable-row-operations"},!n&&(l?y.default.createElement("span",null,y.default.createElement("a",{onClick:function(){return e.save(a.ID)}},"\u4fdd\u5b58"),y.default.createElement(u.default,{type:"vertical"}),y.default.createElement(o.default,{title:"\u786e\u5b9a\u53d6\u6d88?",onConfirm:function(){return e.cancel(a.ID)}},y.default.createElement("a",null,"\u53d6\u6d88"))):y.default.createElement("span",null,y.default.createElement("a",{onClick:function(){return e.edit(a.ID)}},"\u7f16\u8f91"))),!l&&(n?y.default.createElement("span",null,y.default.createElement(o.default,{title:"\u786e\u5b9a\u5220\u9664?",onConfirm:function(){return e.confirmdelete(a.ID)}},y.default.createElement("a",null,"\u63d0\u4ea4")),y.default.createElement(u.default,{type:"vertical"}),y.default.createElement("a",{onClick:function(){return e.canceldelete(a.ID)}},"\u53d6\u6d88")):y.default.createElement("span",{style:{marginLeft:10}},y.default.createElement("a",{onClick:function(){return e.askdelete(a.ID)}},"\u5220\u9664"))))}}],g=(0,s.default)({showSizeChanger:!0,showQuickJumper:!0},c.pagination),v={selectedRowKeys:a,onChange:this.handleRowSelectChange,getCheckboxProps:function(e){return{disabled:e.disabled}}};return this.cacheData=this.state.data.map(function(e){return(0,s.default)({},e)}),y.default.createElement("div",{className:E.default.standardTable},y.default.createElement("div",{className:E.default.tableAlert},y.default.createElement(d.default,{message:y.default.createElement("div",null,"\u5df2\u9009\u62e9 ",y.default.createElement("a",{style:{fontWeight:600}},a.length)," \u4e2a\u9879\u76ee\xa0",y.default.createElement("a",{onClick:this.cleanSelectedKeys,style:{marginLeft:24}},"\u53d6\u6d88\u52fe\u9009")),type:"info",showIcon:!0})),y.default.createElement(r.default,{loading:p,rowKey:function(e){return e.ID},rowSelection:v,dataSource:l,columns:m,pagination:g,onChange:this.handleTableChange}))}}]),t}(y.PureComponent),I=w;t.default=I},vIdK:function(e,t,a){e.exports={standardTable:"antd-pro-gcmdb-ui-src-components-project-table-index-standardTable",tableAlert:"antd-pro-gcmdb-ui-src-components-project-table-index-tableAlert"}}}]);