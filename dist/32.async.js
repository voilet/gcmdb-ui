(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[32],{"44eo":function(e,t,a){e.exports={standardTable:"antd-pro-components-resource-plan-index-standardTable",tableAlert:"antd-pro-components-resource-plan-index-tableAlert"}},"Q7/H":function(e,t,a){e.exports={tableList:"antd-pro-pages-g-resource-g-hardware-set-meal-plan-plan-tableList",tableListOperator:"antd-pro-pages-g-resource-g-hardware-set-meal-plan-plan-tableListOperator",tableListForm:"antd-pro-pages-g-resource-g-hardware-set-meal-plan-plan-tableListForm",submitButtons:"antd-pro-pages-g-resource-g-hardware-set-meal-plan-plan-submitButtons"}},"T/eg":function(e,t,a){"use strict";var l=a("GyWo"),d=a("4Gf+");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("z4Cl");var r=d(a("L9Tq")),i=d(a("OjS7"));a("jYJC");var n=d(a("47AH"));a("9E1Q");var s=d(a("VtQk"));a("oeOs");var o=d(a("AXz3"));a("B5iR");var u=d(a("c0J2")),c=l(a("ZS5U")),p=(d(a("I9Uw")),d(a("44eo"))),m=(a("gr65"),u.default.Option),f=e=>{var t=e.editable,a=e.value,l=e.onChange;return c.default.createElement("div",null,t?c.default.createElement(o.default,{style:{margin:"-5px 0"},value:a,onChange:e=>l(e.target.value)}):a)};class h extends c.PureComponent{constructor(){super(...arguments),this.state={selectedRowKeys:[],totalCallNo:0,data:[],cpuData:[],memData:[],powerData:[],diskData:[],adaptorData:[],status:!1,disabled:!0},this.columns=[{title:"\u5957\u9910\u540d\u79f0",dataIndex:"title",width:"100",key:"1",render:(e,t)=>{return c.default.createElement(f,{editable:t.editable,value:e,onChange:e=>this.handleChange(e,t.ID,"title")})}},{title:"cpu\u5957\u9910",dataIndex:"cpu_info",width:"100",key:"2",render:(e,t)=>this.renderSelect(e,t,"cpu_info",this.state.cpuData)},{title:"cpu\u8be6\u7ec6",dataIndex:"cpu_info",width:"100",key:"3",render:(e,t)=>{var a=`\u6570\u91cf: ${""==e.num?"\u65e0":e.num}, \u9891\u7387: ${""==e.mainfrequency?"\u65e0":e.mainfrequency}, \u6838\u6570: ${""==e.cores?"\u65e0":e.cores}, \u7c7b\u578b: ${""==e.categorycpuinfo.title?"\u65e0":e.categorycpuinfo.title}`;return c.default.createElement("div",null,a)}},{title:"\u5185\u5b58\u5957\u9910",dataIndex:"mem_info",width:"100",key:"4",render:(e,t)=>this.renderSelect(e,t,"mem_info",this.state.memData)},{title:"\u5185\u5b58\u8be6\u7ec6",dataIndex:"mem_info",width:"100",key:"5",render:(e,t)=>{var a=`\u6570\u91cf: ${""==e.num?"\u65e0":e.num}, \u9891\u7387: ${""==e.mainfrequency?"\u65e0":e.mainfrequency}, \u7c7b\u578b:  ${""==e.categorymeminfo.title?"\u65e0":e.categorymeminfo.title}, \u5185\u5b58\uff1a${""==e.volume?"\u65e0":e.volume}`;return c.default.createElement("div",null,a)}},{title:"\u786c\u76d8\u5957\u9910",dataIndex:"disk_info",width:"100",key:"6",render:(e,t)=>this.renderSelect(e,t,"disk_info",this.state.diskData)},{title:"\u786c\u76d8\u8be6\u7ec6",dataIndex:"disk_info",width:"100",key:"7",render:(e,t)=>{var a=`\u6570\u91cf: ${""==e.num?"\u65e0":e.num}, \u8f6c\u6570: ${""==e.rpm?"\u65e0":e.rpm}, \u7c7b\u578b:  ${""==e.categorydiskinfo.title?"\u65e0":e.categorydiskinfo.title},  \u5185\u5b58\uff1a${""==e.volume?"\u65e0":e.volume}`;return c.default.createElement("div",null,a)}},{title:"\u7535\u6e90\u5957\u9910",dataIndex:"power_info",width:"100",key:"8",render:(e,t)=>this.renderSelect(e,t,"power_info",this.state.powerData)},{title:"\u7535\u6e90\u8be6\u7ec6",dataIndex:"power_info",width:"100",key:"9",render:(e,t)=>{var a=`\u6570\u91cf: ${""==e.num?"\u65e0":e.num}, \u5185\u5b58\uff1a${""==e.volume?"\u65e0":e.volume}`;return c.default.createElement("div",null,a)}},{title:"\u7f51\u5361\u5957\u9910",dataIndex:"adaptor_info",width:"100",key:"10",render:(e,t)=>this.renderSelect(e,t,"adaptor_info",this.state.adaptorData)},{title:"\u7f51\u5361\u8be6\u7ec6",dataIndex:"adaptor_info",width:"100",key:"11",render:(e,t)=>{var a=`\u6570\u91cf: ${""==e.num?"\u65e0":e.num}, \u7c7b\u578b:  ${""==e.categoryadaptorinfo.title?"\u65e0":e.categoryadaptorinfo.title} `;return c.default.createElement("div",null,a)}},{title:"\u5907\u6ce8",dataIndex:"comment",width:"100",key:"12",render:(e,t)=>{return c.default.createElement(f,{editable:t.editable,value:e,onChange:e=>this.handleChange(e,t.ID,"comment")})}},{title:"\u64cd\u4f5c",dataIndex:"ID",width:"auto",fixed:"right",key:"operation",render:(e,t)=>{var a=t.editable,l=t.deleteable;return c.default.createElement("div",{className:"editable-row-operations"},!l&&(a?c.default.createElement("span",null,c.default.createElement("a",{onClick:()=>this.save(t.ID)},"\u4fdd\u5b58"),c.default.createElement(s.default,{type:"vertical"}),c.default.createElement(n.default,{title:"\u786e\u5b9a\u53d6\u6d88?",onConfirm:()=>this.cancel(t.ID)},c.default.createElement("a",null,"\u53d6\u6d88"))):c.default.createElement("span",null,c.default.createElement("a",{onClick:()=>this.edit(t.ID)},"\u7f16\u8f91"))),!a&&(l?c.default.createElement("span",null,c.default.createElement(n.default,{title:"\u786e\u5b9a\u5220\u9664?",onConfirm:()=>this.confirmdelete(t.ID)},c.default.createElement("a",null,"\u63d0\u4ea4")),c.default.createElement(s.default,{type:"vertical"}),c.default.createElement("a",{onClick:()=>this.canceldelete(t.ID)},"\u53d6\u6d88")):c.default.createElement("span",{style:{marginLeft:10}},c.default.createElement("a",{onClick:()=>this.askdelete(t.ID)},"\u5220\u9664"))))}}],this.handleTableChange=((e,t)=>{this.props.onChange(e,t)})}componentWillReceiveProps(e){console.log("plannnnnnnnnnnnnn",e.ghardware),e.ghardware.data.list&&this.setState({data:e.ghardware.data.list.map(e=>{return void 0==e.tabStatus&&(e.tabStatus=!0),e}),cpuData:e.ghardware.data.cpu_plan_category,memData:e.ghardware.data.mem_plan_category,powerData:e.ghardware.data.power_plan_category,diskData:e.ghardware.data.disk_plan_category,adaptorData:e.ghardware.data.adaptor_plan_category})}renderSelect(e,t,a,l){return c.default.createElement(u.default,{defaultValue:e.title,disabled:t.tabStatus,style:{width:"auto"},onChange:e=>{this.handSelectChange(e,t.ID,a)}},void 0==l?[]:l.map(e=>{return c.default.createElement(m,{key:e.id,value:e.id},e.title)}))}handSelectChange(e,t,a){var l=[...this.state.data],d=l.filter(e=>t===e.ID)[0];d&&(d[a]=(0,i.default)({},d[a],{title:e,newId:e}),this.setState({data:l,disabled:!1})),console.log(e,t,a)}handleChange(e,t,a){var l=[...this.state.data],d=l.filter(e=>t===e.ID)[0];d&&(d[a]=e,this.setState({data:l,disabled:!1}))}edit(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];a&&(a.editable=!0,this.setState({data:t.map(t=>{return t.ID===e&&(t.tabStatus=!1),t}),disabled:!1}))}save(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];a&&(delete a.editable,a.enable=this.state.status,this.setState({data:t.map(t=>{return t.ID===e&&(t.tabStatus=!0),t}),disabled:!0}),this.cacheData=t.map(e=>(0,i.default)({},e)),this.props.handleSaveData(a))}cancel(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];a&&(Object.assign(a,this.cacheData.filter(t=>e===t.ID)[0]),delete a.editable,this.setState({data:t.map(t=>{return t.ID===e&&(t.tabStatus=!0),t}),disabled:!0}))}askdelete(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];a&&(a.deleteable=!0,this.setState({data:t}))}confirmdelete(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];if(a){var l=t.indexOf(a);l>-1&&t.splice(l,1),a.tag=!1,this.setState({data:t}),this.cacheData=t.map(e=>(0,i.default)({},e)),console.log(a),this.props.handleDeleteData(a)}}canceldelete(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];a&&(Object.assign(a,this.cacheData.filter(t=>e===t.ID)[0]),delete a.deleteable,this.setState({data:t}))}render(){var e=this.state,t=(e.selectedRowKeys,e.totalCallNo,this.props);t.gidc,t.loading;return this.cacheData=void 0==this.state.data?[]:this.state.data.map(e=>(0,i.default)({},e)),c.default.createElement("div",{className:p.default.standardTable},c.default.createElement(r.default,{bordered:!0,scroll:{x:2200},rowKey:e=>e.ID,dataSource:this.state.data,columns:this.columns,onChange:this.handleTableChange}))}}var v=h;t.default=v},aUa9:function(e,t,a){"use strict";var l=a("4Gf+"),d=a("GyWo");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("DxMX");var r=l(a("ivY1"));a("9E1Q");var i=l(a("VtQk"));a("sbpV");var n=l(a("yPMy"));a("qhfc");var s=l(a("aEti"));a("CKBq");var o=l(a("nvQ8"));a("cqzp");var u=l(a("fMIj"));a("62OL");var c,p,m,f=l(a("lZ5B")),h=d(a("ZS5U")),v=a("rAnT"),g=l(a("T/eg")),w=l(a("zHco")),y=l(a("alAD")),_=l(a("Q7/H")),D=(c=(0,v.connect)(e=>e),p=f.default.create(),c(m=p(m=class extends h.PureComponent{constructor(){super(...arguments),this.state={selectedRows:[],formValues:{}},this.handleSelectRows=(e=>{this.setState({selectedRows:e})}),this.handleSaveData=(e=>{var t=e.title,a=e.comment,l=e.cpu_info,d=e.mem_info,r=e.power_info,i=e.disk_info,n=e.adaptor_info,s={ID:e.ID,cpu_id:void 0==l.newId?l.ID:l.newId,mem_id:void 0==d.newId?d.ID:d.newId,disk_id:void 0==i.newId?i.ID:i.newId,power_id:void 0==r.newId?r.ID:r.newId,adaptor_id:void 0==n.newId?n.ID:n.newId,title:t,comment:a};this.props.dispatch({type:"ghardware/modifyHardwarePlan",payload:s})}),this.handleDeleteData=(e=>{var t=e.ID,a=[];a.push(t),this.props.dispatch({type:"ghardware/deleteHardwarePlan",payload:{tag:!1,infolist:JSON.stringify({ids:a})}})})}componentDidMount(){var e=this.props.dispatch;e({type:"ghardware/queryHardwarePlan"})}render(){var e=this.props.ghardware,t=this.state.selectedRows,a=h.default.createElement(u.default,{onClick:this.handleMenuClick,selectedKeys:[]},h.default.createElement(u.default.Item,{key:"approval"},"\u6279\u91cf\u5f00\u542f"));return h.default.createElement(w.default,{title:"\u5957\u9910\u5217\u8868"},h.default.createElement(r.default,{bordered:!1},h.default.createElement("div",{className:_.default.tableList},h.default.createElement("div",{style:{height:40}},h.default.createElement(y.default,{dispatch:this.props.dispatch,hardwaredata:e.composedata}),t.length>0&&h.default.createElement("div",null,h.default.createElement(n.default,{overlay:a},h.default.createElement(s.default,null,"\u66f4\u591a\u64cd\u4f5c ",h.default.createElement(o.default,{type:"down"}))))),h.default.createElement(i.default,null,"  \u5957\u9910\u6570\u636e  "),h.default.createElement(g.default,{ghardware:e.composedata,handleSaveData:this.handleSaveData,handleDeleteData:this.handleDeleteData}))))}})||m)||m);t.default=D},alAD:function(e,t,a){"use strict";var l=a("4Gf+"),d=a("GyWo");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("5QNv");var r=l(a("XRPJ")),i=l(a("RSNA"));a("qhfc");var n=l(a("aEti"));a("Vvjs");var s=l(a("66S2"));a("B5iR");var o=l(a("c0J2"));a("oeOs");var u=l(a("AXz3"));a("62OL");var c,p,m,f=l(a("lZ5B")),h=d(a("ZS5U")),v=l(a("Q7/H")),g=a("rAnT"),w=f.default.Item,y=u.default.TextArea,_=o.default.Option,D=(c=(0,g.connect)(e=>e),p=f.default.create(),c(m=p(m=class extends h.PureComponent{constructor(){super(...arguments),this.state={modalVisible:!1,selectedGroupValue:{}},this.handleModalVisible=(e=>{this.setState({modalVisible:!!e})}),this.handleAddIDC=(e=>{var t=this.props.form;e.preventDefault(),t.validateFields((e,a)=>{if(!e){var l={title:t.getFieldValue("title")?t.getFieldValue("title"):"",cpu_id:t.getFieldValue("cpu_id")?t.getFieldValue("cpu_id"):"",mem_id:t.getFieldValue("mem_id")?t.getFieldValue("mem_id"):"",disk_id:t.getFieldValue("disk_id")?t.getFieldValue("disk_id"):"",power_id:t.getFieldValue("power_id")?t.getFieldValue("power_id"):"",adaptor_id:t.getFieldValue("adaptor_id")?t.getFieldValue("adaptor_id"):"",comment:t.getFieldValue("comment")?t.getFieldValue("comment"):""};this.props.dispatch({type:"ghardware/addHardwarePlan",payload:l}),s.default.success("\u6dfb\u52a0\u6210\u529f"),this.setState({modalVisible:!1}),t.resetFields()}})})}render(){var e=this.props.form.getFieldDecorator,t=this.props.hardwaredata,a=void 0==t.data.cpu_plan_category?[]:t.data.cpu_plan_category,l=void 0==t.data.mem_plan_category?[]:t.data.mem_plan_category,d=void 0==t.data.disk_plan_category?[]:t.data.disk_plan_category,s=void 0==t.data.adaptor_plan_category?[]:t.data.adaptor_plan_category,c=void 0==t.data.power_plan_category?[]:t.data.power_plan_category,p={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}};return h.default.createElement("div",{className:v.default.tableListOperator,style:{float:"left"}},h.default.createElement(n.default,{icon:"plus",type:"primary",onClick:()=>this.handleModalVisible(!0)},"\u6dfb\u52a0\u5957\u9910"),h.default.createElement(r.default,{title:"\u6dfb\u52a0\u5957\u9910",visible:this.state.modalVisible,onOk:this.handleAddIDC,width:600,onCancel:()=>this.handleModalVisible()},h.default.createElement(w,(0,i.default)({},p,{label:"\u5957\u9910\u540d\u79f0"}),e("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5957\u9910\u540d\u79f0"}]})(h.default.createElement(u.default,{placeholder:"\u8bf7\u8f93\u5165\u5957\u9910\u540d\u79f0"}))),h.default.createElement(w,(0,i.default)({},p,{label:"cpu\u5957\u9910"}),e("cpu_id",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9cpu\u5957\u9910"}]})(h.default.createElement(o.default,{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9cpu\u5957\u9910"},a.map(e=>h.default.createElement(_,{key:e.id,value:e.id},e.title))))),h.default.createElement(w,(0,i.default)({},p,{label:"\u5185\u5b58\u5957\u9910"}),e("mem_id",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5185\u5b58\u5957\u9910"}]})(h.default.createElement(o.default,{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u5185\u5b58\u5957\u9910"},l.map(e=>h.default.createElement(_,{key:e.id,value:e.id},e.title))))),h.default.createElement(w,(0,i.default)({},p,{label:"\u786c\u76d8\u5957\u9910"}),e("disk_id",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u786c\u76d8\u5957\u9910"}]})(h.default.createElement(o.default,{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u786c\u76d8\u5957\u9910"},d.map(e=>h.default.createElement(_,{key:e.id,value:e.id},e.title))))),h.default.createElement(w,(0,i.default)({},p,{label:"\u7535\u6e90\u5957\u9910"}),e("power_id",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7535\u6e90\u5957\u9910"}]})(h.default.createElement(o.default,{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u7535\u6e90\u5957\u9910"},c.map(e=>h.default.createElement(_,{key:e.id,value:e.id},e.title))))),h.default.createElement(w,(0,i.default)({},p,{label:"\u7f51\u5361\u5957\u9910"}),e("adaptor_id")(h.default.createElement(o.default,{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u7535\u6e90\u5957\u9910"},s.map(e=>h.default.createElement(_,{key:e.id,value:e.id},e.title))))),h.default.createElement(w,(0,i.default)({},p,{label:"\u5907\u6ce8"}),e("comment")(h.default.createElement(y,{style:{minHeight:32},placeholder:"\u5957\u9910\u5907\u6ce8",rows:4})))))}})||m)||m);t.default=D}}]);