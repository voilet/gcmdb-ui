(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"44eo":function(e,t,a){e.exports={standardTable:"antd-pro-gcmdb-ui-src-components-resource-plan-index-standardTable",tableAlert:"antd-pro-gcmdb-ui-src-components-resource-plan-index-tableAlert"}},"Q7/H":function(e,t,a){e.exports={tableList:"antd-pro-gcmdb-ui-src-pages-g-resource-g-hardware-set-meal-plan-plan-tableList",tableListOperator:"antd-pro-gcmdb-ui-src-pages-g-resource-g-hardware-set-meal-plan-plan-tableListOperator",tableListForm:"antd-pro-gcmdb-ui-src-pages-g-resource-g-hardware-set-meal-plan-plan-tableListForm",submitButtons:"antd-pro-gcmdb-ui-src-pages-g-resource-g-hardware-set-meal-plan-plan-submitButtons"}},"T/eg":function(e,t,a){"use strict";var n=a("VY4n"),l=a("0ZgE");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ggfa");var d=l(a("M+wZ")),r=l(a("U2oY")),i=l(a("bVKW"));a("8EHj");var u=l(a("6xKx"));a("pdEl");var o=l(a("0Hx8")),c=l(a("TFzq")),s=l(a("DEU0")),f=l(a("+hkI")),p=l(a("54rf")),m=l(a("oHNe"));a("0lkx");var h=l(a("gEKc"));a("6ASg");var v=l(a("pKc7")),g=n(a("bRCM")),y=(l(a("I9Uw")),l(a("44eo"))),w=(a("gr65"),v.default.Option),b=function(e){var t=e.editable,a=e.value,n=e.onChange;return g.default.createElement("div",null,t?g.default.createElement(h.default,{style:{margin:"-5px 0"},value:a,onChange:function(e){return n(e.target.value)}}):a)},_=function(e){function t(){var e,a;(0,c.default)(this,t);for(var n=arguments.length,l=new Array(n),d=0;d<n;d++)l[d]=arguments[d];return a=(0,f.default)(this,(e=(0,p.default)(t)).call.apply(e,[this].concat(l))),a.state={selectedRowKeys:[],totalCallNo:0,data:[],cpuData:[],memData:[],powerData:[],diskData:[],adaptorData:[],status:!1,disabled:!0},a.columns=[{title:"套餐名称",dataIndex:"title",width:"100",key:"1",render:function(e,t){return g.default.createElement(b,{editable:t.editable,value:e,onChange:function(e){return a.handleChange(e,t.ID,"title")}})}},{title:"cpu套餐",dataIndex:"cpu_info",width:"100",key:"2",render:function(e,t){return a.renderSelect(e,t,"cpu_info",a.state.cpuData)}},{title:"cpu详细",dataIndex:"cpu_info",width:"100",key:"3",render:function(e,t){var a="数量: ".concat(""==e.num?"无":e.num,", 频率: ").concat(""==e.mainfrequency?"无":e.mainfrequency,", 核数: ").concat(""==e.cores?"无":e.cores,", 类型: ").concat(""==e.categorycpuinfo.title?"无":e.categorycpuinfo.title);return g.default.createElement("div",null,a)}},{title:"内存套餐",dataIndex:"mem_info",width:"100",key:"4",render:function(e,t){return a.renderSelect(e,t,"mem_info",a.state.memData)}},{title:"内存详细",dataIndex:"mem_info",width:"100",key:"5",render:function(e,t){var a="数量: ".concat(""==e.num?"无":e.num,", 频率: ").concat(""==e.mainfrequency?"无":e.mainfrequency,", 类型:  ").concat(""==e.categorymeminfo.title?"无":e.categorymeminfo.title,", 内存：").concat(""==e.volume?"无":e.volume);return g.default.createElement("div",null,a)}},{title:"硬盘套餐",dataIndex:"disk_info",width:"100",key:"6",render:function(e,t){return a.renderSelect(e,t,"disk_info",a.state.diskData)}},{title:"硬盘详细",dataIndex:"disk_info",width:"100",key:"7",render:function(e,t){var a="数量: ".concat(""==e.num?"无":e.num,", 转数: ").concat(""==e.rpm?"无":e.rpm,", 类型:  ").concat(""==e.categorydiskinfo.title?"无":e.categorydiskinfo.title,",  内存：").concat(""==e.volume?"无":e.volume);return g.default.createElement("div",null,a)}},{title:"电源套餐",dataIndex:"power_info",width:"100",key:"8",render:function(e,t){return a.renderSelect(e,t,"power_info",a.state.powerData)}},{title:"电源详细",dataIndex:"power_info",width:"100",key:"9",render:function(e,t){var a="数量: ".concat(""==e.num?"无":e.num,", 内存：").concat(""==e.volume?"无":e.volume);return g.default.createElement("div",null,a)}},{title:"网卡套餐",dataIndex:"adaptor_info",width:"100",key:"10",render:function(e,t){return a.renderSelect(e,t,"adaptor_info",a.state.adaptorData)}},{title:"网卡详细",dataIndex:"adaptor_info",width:"100",key:"11",render:function(e,t){var a="数量: ".concat(""==e.num?"无":e.num,", 类型:  ").concat(""==e.categoryadaptorinfo.title?"无":e.categoryadaptorinfo.title," ");return g.default.createElement("div",null,a)}},{title:"备注",dataIndex:"comment",width:"100",key:"12",render:function(e,t){return g.default.createElement(b,{editable:t.editable,value:e,onChange:function(e){return a.handleChange(e,t.ID,"comment")}})}},{title:"操作",dataIndex:"ID",width:"auto",fixed:"right",key:"operation",render:function(e,t){var n=t.editable,l=t.deleteable;return g.default.createElement("div",{className:"editable-row-operations"},!l&&(n?g.default.createElement("span",null,g.default.createElement("a",{onClick:function(){return a.save(t.ID)}},"保存"),g.default.createElement(o.default,{type:"vertical"}),g.default.createElement(u.default,{title:"确定取消?",onConfirm:function(){return a.cancel(t.ID)}},g.default.createElement("a",null,"取消"))):g.default.createElement("span",null,g.default.createElement("a",{onClick:function(){return a.edit(t.ID)}},"编辑"))),!n&&(l?g.default.createElement("span",null,g.default.createElement(u.default,{title:"确定删除?",onConfirm:function(){return a.confirmdelete(t.ID)}},g.default.createElement("a",null,"提交")),g.default.createElement(o.default,{type:"vertical"}),g.default.createElement("a",{onClick:function(){return a.canceldelete(t.ID)}},"取消")):g.default.createElement("span",{style:{marginLeft:10}},g.default.createElement("a",{onClick:function(){return a.askdelete(t.ID)}},"删除"))))}}],a.handleTableChange=function(e,t){a.props.onChange(e,t)},a}return(0,m.default)(t,e),(0,s.default)(t,[{key:"componentWillReceiveProps",value:function(e){console.log("plannnnnnnnnnnnnn",e.ghardware),e.ghardware.data.list&&this.setState({data:e.ghardware.data.list.map(function(e){return void 0==e.tabStatus&&(e.tabStatus=!0),e}),cpuData:e.ghardware.data.cpu_plan_category,memData:e.ghardware.data.mem_plan_category,powerData:e.ghardware.data.power_plan_category,diskData:e.ghardware.data.disk_plan_category,adaptorData:e.ghardware.data.adaptor_plan_category})}},{key:"renderSelect",value:function(e,t,a,n){var l=this;return g.default.createElement(v.default,{defaultValue:e.title,disabled:t.tabStatus,style:{width:"auto"},onChange:function(e){l.handSelectChange(e,t.ID,a)}},void 0==n?[]:n.map(function(e){return g.default.createElement(w,{key:e.id,value:e.id},e.title)}))}},{key:"handSelectChange",value:function(e,t,a){var n=(0,i.default)(this.state.data),l=n.filter(function(e){return t===e.ID})[0];l&&(l[a]=(0,r.default)({},l[a],{title:e,newId:e}),this.setState({data:n,disabled:!1})),console.log(e,t,a)}},{key:"handleChange",value:function(e,t,a){var n=(0,i.default)(this.state.data),l=n.filter(function(e){return t===e.ID})[0];l&&(l[a]=e,this.setState({data:n,disabled:!1}))}},{key:"edit",value:function(e){var t=(0,i.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(a.editable=!0,this.setState({data:t.map(function(t){return t.ID===e&&(t.tabStatus=!1),t}),disabled:!1}))}},{key:"save",value:function(e){var t=(0,i.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(delete a.editable,a.enable=this.state.status,this.setState({data:t.map(function(t){return t.ID===e&&(t.tabStatus=!0),t}),disabled:!0}),this.cacheData=t.map(function(e){return(0,r.default)({},e)}),this.props.handleSaveData(a))}},{key:"cancel",value:function(e){var t=(0,i.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(Object.assign(a,this.cacheData.filter(function(t){return e===t.ID})[0]),delete a.editable,this.setState({data:t.map(function(t){return t.ID===e&&(t.tabStatus=!0),t}),disabled:!0}))}},{key:"askdelete",value:function(e){var t=(0,i.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(a.deleteable=!0,this.setState({data:t}))}},{key:"confirmdelete",value:function(e){var t=(0,i.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];if(a){var n=t.indexOf(a);n>-1&&t.splice(n,1),a.tag=!1,this.setState({data:t}),this.cacheData=t.map(function(e){return(0,r.default)({},e)}),console.log(a),this.props.handleDeleteData(a)}}},{key:"canceldelete",value:function(e){var t=(0,i.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(Object.assign(a,this.cacheData.filter(function(t){return e===t.ID})[0]),delete a.deleteable,this.setState({data:t}))}},{key:"render",value:function(){var e=this.state,t=(e.selectedRowKeys,e.totalCallNo,this.props);t.gidc,t.loading;return this.cacheData=void 0==this.state.data?[]:this.state.data.map(function(e){return(0,r.default)({},e)}),g.default.createElement("div",{className:y.default.standardTable},g.default.createElement(d.default,{bordered:!0,scroll:{x:2200},rowKey:function(e){return e.ID},dataSource:this.state.data,columns:this.columns,onChange:this.handleTableChange}))}}]),t}(g.PureComponent),D=_;t.default=D},aUa9:function(e,t,a){"use strict";var n=a("0ZgE"),l=a("VY4n");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("UsS6");var d=n(a("xqAZ"));a("pdEl");var r=n(a("0Hx8"));a("1Y2U");var i=n(a("c8pg"));a("3PXm");var u=n(a("m2aW"));a("xzRB");var o=n(a("TOEs"));a("wPR8");var c=n(a("cmPo")),s=n(a("TFzq")),f=n(a("DEU0")),p=n(a("+hkI")),m=n(a("54rf")),h=n(a("oHNe"));a("M50D");var v,g,y,w=n(a("5Zb7")),b=l(a("bRCM")),_=a("rAnT"),D=n(a("T/eg")),E=n(a("zHco")),k=n(a("alAD")),I=n(a("Q7/H")),S=(v=(0,_.connect)(function(e){return e}),g=w.default.create(),v(y=g(y=function(e){function t(){var e,a;(0,s.default)(this,t);for(var n=arguments.length,l=new Array(n),d=0;d<n;d++)l[d]=arguments[d];return a=(0,p.default)(this,(e=(0,m.default)(t)).call.apply(e,[this].concat(l))),a.state={selectedRows:[],formValues:{}},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSaveData=function(e){var t=e.title,n=e.comment,l=e.cpu_info,d=e.mem_info,r=e.power_info,i=e.disk_info,u=e.adaptor_info,o={ID:e.ID,cpu_id:void 0==l.newId?l.ID:l.newId,mem_id:void 0==d.newId?d.ID:d.newId,disk_id:void 0==i.newId?i.ID:i.newId,power_id:void 0==r.newId?r.ID:r.newId,adaptor_id:void 0==u.newId?u.ID:u.newId,title:t,comment:n};a.props.dispatch({type:"ghardware/modifyHardwarePlan",payload:o})},a.handleDeleteData=function(e){var t=e.ID,n=[];n.push(t),a.props.dispatch({type:"ghardware/deleteHardwarePlan",payload:{tag:!1,infolist:JSON.stringify({ids:n})}})},a}return(0,h.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)({type:"ghardware/queryHardwarePlan"})}},{key:"render",value:function(){var e=this.props.ghardware,t=this.state.selectedRows,a=b.default.createElement(c.default,{onClick:this.handleMenuClick,selectedKeys:[]},b.default.createElement(c.default.Item,{key:"approval"},"批量开启"));return b.default.createElement(E.default,{title:"套餐列表"},b.default.createElement(d.default,{bordered:!1},b.default.createElement("div",{className:I.default.tableList},b.default.createElement("div",{style:{height:40}},b.default.createElement(k.default,{dispatch:this.props.dispatch,hardwaredata:e.composedata}),t.length>0&&b.default.createElement("div",null,b.default.createElement(i.default,{overlay:a},b.default.createElement(u.default,null,"更多操作 ",b.default.createElement(o.default,{type:"down"}))))),b.default.createElement(r.default,null,"  套餐数据  "),b.default.createElement(D.default,{ghardware:e.composedata,handleSaveData:this.handleSaveData,handleDeleteData:this.handleDeleteData}))))}}]),t}(b.PureComponent))||y)||y);t.default=S},alAD:function(e,t,a){"use strict";var n=a("0ZgE"),l=a("VY4n");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("NG6T");var d=n(a("uZXS")),r=n(a("+wDg"));a("3PXm");var i=n(a("m2aW"));a("s/1u");var u=n(a("TMZs")),o=n(a("TFzq")),c=n(a("DEU0")),s=n(a("+hkI")),f=n(a("54rf")),p=n(a("oHNe"));a("6ASg");var m=n(a("pKc7"));a("0lkx");var h=n(a("gEKc"));a("M50D");var v,g,y,w=n(a("5Zb7")),b=l(a("bRCM")),_=n(a("Q7/H")),D=a("rAnT"),E=w.default.Item,k=h.default.TextArea,I=m.default.Option,S=(v=(0,D.connect)(function(e){return e}),g=w.default.create(),v(y=g(y=function(e){function t(){var e,a;(0,o.default)(this,t);for(var n=arguments.length,l=new Array(n),d=0;d<n;d++)l[d]=arguments[d];return a=(0,s.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(l))),a.state={modalVisible:!1,selectedGroupValue:{}},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.handleAddIDC=function(e){var t=a.props.form;e.preventDefault(),t.validateFields(function(e,n){if(!e){var l={title:t.getFieldValue("title")?t.getFieldValue("title"):"",cpu_id:t.getFieldValue("cpu_id")?t.getFieldValue("cpu_id"):"",mem_id:t.getFieldValue("mem_id")?t.getFieldValue("mem_id"):"",disk_id:t.getFieldValue("disk_id")?t.getFieldValue("disk_id"):"",power_id:t.getFieldValue("power_id")?t.getFieldValue("power_id"):"",adaptor_id:t.getFieldValue("adaptor_id")?t.getFieldValue("adaptor_id"):"",comment:t.getFieldValue("comment")?t.getFieldValue("comment"):""};a.props.dispatch({type:"ghardware/addHardwarePlan",payload:l}),u.default.success("添加成功"),a.setState({modalVisible:!1}),t.resetFields()}})},a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props.hardwaredata,n=void 0==a.data.cpu_plan_category?[]:a.data.cpu_plan_category,l=void 0==a.data.mem_plan_category?[]:a.data.mem_plan_category,u=void 0==a.data.disk_plan_category?[]:a.data.disk_plan_category,o=void 0==a.data.adaptor_plan_category?[]:a.data.adaptor_plan_category,c=void 0==a.data.power_plan_category?[]:a.data.power_plan_category,s={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}};return b.default.createElement("div",{className:_.default.tableListOperator,style:{float:"left"}},b.default.createElement(i.default,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"添加套餐"),b.default.createElement(d.default,{title:"添加套餐",visible:this.state.modalVisible,onOk:this.handleAddIDC,width:600,onCancel:function(){return e.handleModalVisible()}},b.default.createElement(E,(0,r.default)({},s,{label:"套餐名称"}),t("title",{rules:[{required:!0,message:"请输入套餐名称"}]})(b.default.createElement(h.default,{placeholder:"请输入套餐名称"}))),b.default.createElement(E,(0,r.default)({},s,{label:"cpu套餐"}),t("cpu_id",{rules:[{required:!0,message:"请选择cpu套餐"}]})(b.default.createElement(m.default,{style:{width:"100%"},placeholder:"请选择cpu套餐"},n.map(function(e){return b.default.createElement(I,{key:e.id,value:e.id},e.title)})))),b.default.createElement(E,(0,r.default)({},s,{label:"内存套餐"}),t("mem_id",{rules:[{required:!0,message:"请选择内存套餐"}]})(b.default.createElement(m.default,{style:{width:"100%"},placeholder:"请选择内存套餐"},l.map(function(e){return b.default.createElement(I,{key:e.id,value:e.id},e.title)})))),b.default.createElement(E,(0,r.default)({},s,{label:"硬盘套餐"}),t("disk_id",{rules:[{required:!0,message:"请选择硬盘套餐"}]})(b.default.createElement(m.default,{style:{width:"100%"},placeholder:"请选择硬盘套餐"},u.map(function(e){return b.default.createElement(I,{key:e.id,value:e.id},e.title)})))),b.default.createElement(E,(0,r.default)({},s,{label:"电源套餐"}),t("power_id",{rules:[{required:!0,message:"请选择电源套餐"}]})(b.default.createElement(m.default,{style:{width:"100%"},placeholder:"请选择电源套餐"},c.map(function(e){return b.default.createElement(I,{key:e.id,value:e.id},e.title)})))),b.default.createElement(E,(0,r.default)({},s,{label:"网卡套餐"}),t("adaptor_id")(b.default.createElement(m.default,{style:{width:"100%"},placeholder:"请选择电源套餐"},o.map(function(e){return b.default.createElement(I,{key:e.id,value:e.id},e.title)})))),b.default.createElement(E,(0,r.default)({},s,{label:"备注"}),t("comment")(b.default.createElement(k,{style:{minHeight:32},placeholder:"套餐备注",rows:4})))))}}]),t}(b.PureComponent))||y)||y);t.default=S}}]);