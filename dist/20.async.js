(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{AZKq:function(e,t,a){"use strict";var l=a("0ZgE"),n=a("VY4n");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("UsS6");var d=l(a("xqAZ"));a("pdEl");var r=l(a("0Hx8"));a("1Y2U");var i=l(a("c8pg"));a("3PXm");var u=l(a("m2aW"));a("xzRB");var s=l(a("TOEs"));a("wPR8");var c=l(a("cmPo")),o=l(a("U2oY")),f=l(a("TFzq")),h=l(a("DEU0")),p=l(a("+hkI")),m=l(a("54rf")),g=l(a("oHNe"));a("M50D");var v,b,E,C=l(a("5Zb7")),y=n(a("bRCM")),w=a("rAnT"),D=l(a("ocqY")),k=l(a("zHco")),I=l(a("ePAC")),S=l(a("b3Yo")),V=(C.default.Item,function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")}),_=(v=(0,w.connect)(function(e){return e}),b=C.default.create(),v(E=b(E=function(e){function t(){var e,a;(0,f.default)(this,t);for(var l=arguments.length,n=new Array(l),d=0;d<l;d++)n[d]=arguments[d];return a=(0,p.default)(this,(e=(0,m.default)(t)).call.apply(e,[this].concat(n))),a.state={selectedRows:[],formValues:{}},a.handleStandardTableChange=function(e,t,l){var n=a.props.dispatch,d=a.state.formValues,r=Object.keys(t).reduce(function(e,a){var l=(0,o.default)({},e);return l[a]=V(t[a]),l},{}),i=(0,o.default)({currentPage:e.current,pageSize:e.pageSize},d,r);l.field&&(i.sorter="".concat(l.field,"_").concat(l.order)),n({type:"gidc/queryIDC",payload:i})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSaveData=function(e){a.props.dispatch({type:"gidc/modifyIDC",payload:e})},a.handleDeleteData=function(e){a.props.dispatch({type:"gidc/deleteIDC",payload:e})},a}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"gidc/queryIDC",payload:""}),e({type:"gidc/queryProvider",payload:""})}},{key:"render",value:function(){var e=this.props.gidc,t=this.state.selectedRows;console.log("this.props",this.props);var a=y.default.createElement(c.default,{onClick:this.handleMenuClick,selectedKeys:[]},y.default.createElement(c.default.Item,{key:"approval"},"批量开启"));return y.default.createElement(k.default,{title:"机房列表"},y.default.createElement(d.default,{bordered:!1},y.default.createElement("div",{className:S.default.tableList},y.default.createElement("div",{style:{height:40}},y.default.createElement(I.default,{providerdata:e.provider}),t.length>0&&y.default.createElement("div",null,y.default.createElement(i.default,{overlay:a},y.default.createElement(u.default,null,"更多操作 ",y.default.createElement(s.default,{type:"down"}))))),y.default.createElement(r.default,null,"  机房数据  "),y.default.createElement(D.default,{selectedRows:t,gidc:e.idc,handleSaveData:this.handleSaveData,handleDeleteData:this.handleDeleteData,handleSelectRows:this.handleSelectRows,onChange:this.handleStandardTableChange}))))}}]),t}(y.PureComponent))||E)||E);t.default=_},ZzYc:function(e,t,a){e.exports={standardTable:"antd-pro-gcmdb-ui-src-components-resource-idc-index-standardTable",tableAlert:"antd-pro-gcmdb-ui-src-components-resource-idc-index-tableAlert"}},b3Yo:function(e,t,a){e.exports={tableList:"antd-pro-gcmdb-ui-src-pages-g-resource-g-idc-idc-i-d-c-tableList",tableListOperator:"antd-pro-gcmdb-ui-src-pages-g-resource-g-idc-idc-i-d-c-tableListOperator",tableListForm:"antd-pro-gcmdb-ui-src-pages-g-resource-g-idc-idc-i-d-c-tableListForm",submitButtons:"antd-pro-gcmdb-ui-src-pages-g-resource-g-idc-idc-i-d-c-submitButtons"}},ePAC:function(e,t,a){"use strict";var l=a("0ZgE"),n=a("VY4n");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("NG6T");var d=l(a("uZXS"));a("9sh3");var r=l(a("r3sT")),i=l(a("+wDg"));a("3PXm");var u=l(a("m2aW"));a("s/1u");var s=l(a("TMZs")),c=l(a("TFzq")),o=l(a("DEU0")),f=l(a("+hkI")),h=l(a("54rf")),p=l(a("oHNe"));a("6ASg");var m=l(a("pKc7"));a("0lkx");var g=l(a("gEKc"));a("M50D");var v,b,E,C=l(a("5Zb7")),y=n(a("bRCM")),w=l(a("b3Yo")),D=a("rAnT"),k=C.default.Item,I=g.default.TextArea,S=m.default.Option,V=(v=(0,D.connect)(function(e){return e}),b=C.default.create(),v(E=b(E=function(e){function t(){var e,a;(0,c.default)(this,t);for(var l=arguments.length,n=new Array(l),d=0;d<l;d++)n[d]=arguments[d];return a=(0,f.default)(this,(e=(0,h.default)(t)).call.apply(e,[this].concat(n))),a.state={modalVisible:!1,selectedGroupValue:{},enable:!1},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.handleAddIDC=function(e){var t=a.props.form;e.preventDefault(),t.validateFields(function(e,l){if(!e){var n={idc_name:t.getFieldValue("idc_name")?t.getFieldValue("idc_name"):"",alias:t.getFieldValue("alias")?t.getFieldValue("alias"):"",band_width:t.getFieldValue("band_width")?t.getFieldValue("band_width"):"",phone:t.getFieldValue("phone")?t.getFieldValue("phone"):"",addresses:t.getFieldValue("addresses")?t.getFieldValue("addresses"):"",ip_range:t.getFieldValue("ip_range")?t.getFieldValue("ip_range"):"",remarks:t.getFieldValue("remarks")?t.getFieldValue("remarks"):"",enable:t.getFieldValue("enable")?t.getFieldValue("enable"):"",providerids:JSON.stringify(a.state.selectedGroupValue)};a.props.dispatch({type:"gidc/addIDC",payload:{description:n}}),s.default.success("添加成功"),a.setState({modalVisible:!1,enable:!1}),t.resetFields()}})},a.handleSelectGroupValue=function(e){a.setState({selectedGroupValue:{data:e}})},a.handleStatusChange=function(e){a.setState({enable:e})},a}return(0,p.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props,l=(a.submitting,a.form,a.dispatch,a.providerdata);console.log("getFieldDecorator+++",this.props);var n={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}};return y.default.createElement("div",{className:w.default.tableListOperator,style:{float:"left"}},y.default.createElement(u.default,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"添加机房"),y.default.createElement(d.default,{title:"添加机房",visible:this.state.modalVisible,onOk:this.handleAddIDC,width:600,onCancel:function(){return e.handleModalVisible()}},y.default.createElement(k,(0,i.default)({},n,{label:"机房名称"}),t("idc_name",{rules:[{required:!0,message:"请输入机房名称"}]})(y.default.createElement(g.default,{placeholder:"请输入机房名称"}))),y.default.createElement(k,(0,i.default)({},n,{label:"机房别名"}),t("alias",{rules:[{required:!0,message:"请输入机房别名"}]})(y.default.createElement(g.default,{placeholder:"请输入机房别名，主机名使用"}))),y.default.createElement(k,(0,i.default)({},n,{label:"运营商"}),t("selectprovider",{rules:[{required:!0}]})(y.default.createElement(m.default,{mode:"multiple",placeholder:"选择运营商",style:{width:120},onChange:this.handleSelectGroupValue,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},l.data.length>0&&l.data.map(function(e){return y.default.createElement(S,{key:e.ID,value:e.ID},e.provider_name)})))),y.default.createElement(k,(0,i.default)({},n,{label:"带宽"}),t("band_width",{rules:[{required:!0,message:"请输入机房带宽"}]})(y.default.createElement(g.default,{placeholder:"请输入机房带宽"}))),y.default.createElement(k,(0,i.default)({},n,{label:"联系电话"}),t("phone",{rules:[{required:!0,message:"请输入机房联系电话"}]})(y.default.createElement(g.default,{placeholder:"请输入机房联系电话"}))),y.default.createElement(k,(0,i.default)({},n,{label:"地址"}),t("addresses",{rules:[{required:!0,message:"请输入机房地址"}]})(y.default.createElement(g.default,{placeholder:"请输入机房地址"}))),y.default.createElement(k,(0,i.default)({},n,{label:"ip地址段"}),t("ip_range",{rules:[{required:!0,message:"描述"}]})(y.default.createElement(I,{style:{minHeight:32},placeholder:"ip地址段 10.1.0.0/16",rows:4}))),y.default.createElement(k,(0,i.default)({},n,{label:"开启使用机房"}),t("enable")(y.default.createElement(r.default,{checkedChildren:"开",unCheckedChildren:"关",checked:this.state.enable,onChange:function(t){return e.handleStatusChange(t)}}))),y.default.createElement(k,(0,i.default)({},n,{label:"描述"}),t("remarks")(y.default.createElement(I,{style:{minHeight:32},placeholder:"机房描述",rows:4})))))}}]),t}(y.PureComponent))||E)||E);t.default=V},ocqY:function(e,t,a){"use strict";var l=a("VY4n"),n=a("0ZgE");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ggfa");var d=n(a("M+wZ"));a("840F");var r=n(a("6eYs")),i=n(a("U2oY")),u=n(a("bVKW"));a("8EHj");var s=n(a("6xKx"));a("pdEl");var c=n(a("0Hx8"));a("9sh3");var o=n(a("r3sT")),f=n(a("TFzq")),h=n(a("DEU0")),p=n(a("+hkI")),m=n(a("54rf")),g=n(a("oHNe"));a("0lkx");var v=n(a("gEKc")),b=l(a("bRCM")),E=(n(a("I9Uw")),n(a("ZzYc"))),C=(a("gr65"),function(e){var t=e.editable,a=e.value,l=e.onChange;return b.default.createElement("div",null,t?b.default.createElement(v.default,{style:{margin:"-5px 0"},value:a,onChange:function(e){return l(e.target.value)}}):a)}),y=function(e){function t(){var e,a;(0,f.default)(this,t);for(var l=arguments.length,n=new Array(l),d=0;d<l;d++)n[d]=arguments[d];return a=(0,p.default)(this,(e=(0,m.default)(t)).call.apply(e,[this].concat(n))),a.state={selectedRowKeys:[],totalCallNo:0,data:[],status:!1,disabled:!0},a.columns=[{title:"机房名称",dataIndex:"idc_name",width:"10%",render:function(e,t){return a.renderColumns(e,t,"idc_name")}},{title:"运营商",dataIndex:"provider_name",width:"8%",render:function(e,t){var a={color:"red"};return b.default.createElement("div",{style:a},t.provider_name)}},{title:"带宽",dataIndex:"band_width",width:"10%",render:function(e,t){return a.renderColumns(e,t,"band_width")}},{title:"地址范围",dataIndex:"ip_range",width:"15%",render:function(e,t){return a.renderColumns(e,t,"ip_range")}},{title:"联系电话",dataIndex:"phone",width:"10%",render:function(e,t){return a.renderColumns(e,t,"phone")}},{title:"位置",dataIndex:"addresses",width:"15%",render:function(e,t){return a.renderColumns(e,t,"addresses")}},{title:"机柜名称",dataIndex:"cabinet_name",width:"10%",render:function(e,t){var a=t.cabinets;if(a){var l={color:"red"};return a.map(function(e){return b.default.createElement("div",{style:l},e.cabinet_name)})}}},{title:"状态",dataIndex:"enable",width:"5%",render:function(e,t){var l=t.enable;return b.default.createElement("div",null,b.default.createElement(o.default,{checkedChildren:"开",unCheckedChildren:"关",checked:l,onChange:function(e){return a.handleStatusChange(t.ID,e)},disabled:a.state.disabled}))}},{title:"操作",dataIndex:"ID",width:"20%",render:function(e,t){var l=t.editable,n=t.deleteable;return b.default.createElement("div",{className:"editable-row-operations"},!n&&(l?b.default.createElement("span",null,b.default.createElement("a",{onClick:function(){return a.save(t.ID)}},"保存"),b.default.createElement(c.default,{type:"vertical"}),b.default.createElement(s.default,{title:"确定取消?",onConfirm:function(){return a.cancel(t.ID)}},b.default.createElement("a",null,"取消"))):b.default.createElement("span",null,b.default.createElement("a",{onClick:function(){return a.edit(t.ID)}},"编辑"))),!l&&(n?b.default.createElement("span",null,b.default.createElement(s.default,{title:"确定删除?",onConfirm:function(){return a.confirmdelete(t.ID)}},b.default.createElement("a",null,"提交")),b.default.createElement(c.default,{type:"vertical"}),b.default.createElement("a",{onClick:function(){return a.canceldelete(t.ID)}},"取消")):b.default.createElement("span",{style:{marginLeft:10}},b.default.createElement("a",{onClick:function(){return a.askdelete(t.ID)}},"删除"))))}}],a.handleStatusChange=function(e,t){var l=(0,u.default)(a.state.data),n=l.filter(function(t){return e===t.ID})[0];n&&(n.enable=t,a.setState({data:l})),console.log("data",a.state.data)},a.handleTableChange=function(e,t){a.props.onChange(e,t)},a.handleRowSelectChange=function(e,t){var l=t.reduce(function(e,t){return e+parseFloat(t.callNo,10)},0);a.props.onSelectRow&&a.props.onSelectRow(t),a.setState({selectedRowKeys:e,totalCallNo:l}),a.props.handleSelectRows(e)},a}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentWillReceiveProps",value:function(e){0===e.selectedRows.length&&this.setState({selectedRowKeys:[],totalCallNo:0}),e.gidc.data&&this.setState({data:e.gidc.data})}},{key:"renderColumns",value:function(e,t,a){var l=this;return b.default.createElement(C,{editable:t.editable,value:e,onChange:function(e){return l.handleChange(e,t.ID,a)}})}},{key:"handleChange",value:function(e,t,a){var l=(0,u.default)(this.state.data),n=l.filter(function(e){return t===e.ID})[0];n&&(n[a]=e,this.setState({data:l,disabled:!1})),console.log("handleChange",e),console.log("handleChange",e)}},{key:"edit",value:function(e){var t=(0,u.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(a.editable=!0,this.setState({data:t,disabled:!1}))}},{key:"save",value:function(e){var t=(0,u.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(delete a.editable,a.enable=this.state.status,this.setState({data:t,disabled:!0}),this.cacheData=t.map(function(e){return(0,i.default)({},e)}),console.log("target",a),this.props.handleSaveData(a))}},{key:"cancel",value:function(e){var t=(0,u.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(Object.assign(a,this.cacheData.filter(function(t){return e===t.ID})[0]),delete a.editable,this.setState({data:t,disabled:!0}))}},{key:"askdelete",value:function(e){var t=(0,u.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(a.deleteable=!0,this.setState({data:t}))}},{key:"confirmdelete",value:function(e){var t=(0,u.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];if(a){var l=t.indexOf(a);l>-1&&t.splice(l,1),a.tag=!1,this.setState({data:t}),this.cacheData=t.map(function(e){return(0,i.default)({},e)}),this.props.handleDeleteData(a)}}},{key:"canceldelete",value:function(e){var t=(0,u.default)(this.state.data),a=t.filter(function(t){return e===t.ID})[0];a&&(Object.assign(a,this.cacheData.filter(function(t){return e===t.ID})[0]),delete a.deleteable,this.setState({data:t}))}},{key:"render",value:function(){var e=this.state,t=e.selectedRowKeys,a=(e.totalCallNo,this.props),l=a.gidc,n=(a.loading,{selectedRowKeys:t,onChange:this.handleRowSelectChange,getCheckboxProps:function(e){return{disabled:e.disabled}}});console.log("gidc.pagination",l.pagination);var u=(0,i.default)({showSizeChanger:!0,showQuickJumper:!0},l.pagination);return this.cacheData=this.state.data.map(function(e){return(0,i.default)({},e)}),b.default.createElement("div",{className:E.default.standardTable},b.default.createElement("div",{className:E.default.tableAlert},b.default.createElement(r.default,{message:b.default.createElement("div",null,"已选择 ",b.default.createElement("a",{style:{fontWeight:600}},t.length)," 台 "),type:"info",showIcon:!0})),b.default.createElement(d.default,{bordered:!0,rowKey:function(e){return e.ID},rowSelection:n,dataSource:this.state.data,columns:this.columns,onChange:this.handleTableChange,pagination:u}))}}]),t}(b.PureComponent),w=y;t.default=w}}]);