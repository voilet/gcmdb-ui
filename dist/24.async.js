(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{OyBV:function(e,t,a){"use strict";var n=a("0ZgE"),l=a("VY4n");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("UsS6");var d=n(a("xqAZ"));a("pdEl");var r=n(a("0Hx8"));a("3PXm");var i=n(a("m2aW"));a("xzRB");var u=n(a("TOEs"));a("wPR8");var c=n(a("cmPo")),o=n(a("U2oY")),s=n(a("TFzq")),f=n(a("DEU0")),p=n(a("+hkI")),h=n(a("54rf")),m=n(a("oHNe"));a("M50D");var y=n(a("5Zb7"));a("0lkx");var b,v,g,x=n(a("gEKc")),E=l(a("bRCM")),w=a("rAnT"),k=a("qqji"),C=n(a("sBNY")),D=n(a("TXgB")),S=x.default.Group,I=function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")},R=(b=(0,w.connect)(function(e){return e}),v=y.default.create(),b(g=v(g=function(e){function t(){var e,a;(0,s.default)(this,t);for(var n=arguments.length,l=new Array(n),d=0;d<n;d++)l[d]=arguments[d];return a=(0,p.default)(this,(e=(0,h.default)(t)).call.apply(e,[this].concat(l))),a.state={selectedRows:[],formValues:{}},a.handleStandardTableChange=function(e,t,n){var l=a.props.dispatch,d=a.state.formValues,r=Object.keys(t).reduce(function(e,a){var n=(0,o.default)({},e);return n[a]=I(t[a]),n},{}),i=(0,o.default)({currentPage:e.current,pageSize:e.pageSize},d,r);n.field&&(i.sorter="".concat(n.field,"_").concat(n.order)),l({type:"gidc/queryCabinet",payload:i})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSaveData=function(e){var t=e.bay_details;a.props.dispatch({type:"gidc/modifyCabinet",payload:(0,o.default)({},e,{bay_details:JSON.stringify({data:t})})})},a.handleDeleteData=function(e){a.props.dispatch({type:"gidc/deleteCabinet",payload:e})},a.handleAdd=function(){(0,a.props.dispatch)(k.routerRedux.push({pathname:"/resource/idc/cabinet/add"}))},a}return(0,m.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)({type:"gidc/queryCabinet"})}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)({type:"gidc/empty"})}},{key:"render",value:function(){var e=this,t=this.props.gidc;console.log("gidc++++++++++++++++++",t);this.state.selectedRows,E.default.createElement(c.default,{onClick:this.handleMenuClick,selectedKeys:[]},E.default.createElement(c.default.Item,{key:"remove"},"批量删除"));return E.default.createElement(d.default,{bordered:!1},E.default.createElement("div",{className:D.default.tableList},E.default.createElement(i.default,{type:"primary",onClick:function(){return e.handleAdd()}},E.default.createElement(u.default,{type:"plus"})," 添加机柜"),E.default.createElement("div",{style:{height:40,textAlign:"center"}},E.default.createElement(S,{compact:!0},E.default.createElement(i.default,{size:"large",style:{color:"blue"}},"机柜名称"),E.default.createElement(x.default.Search,{placeholder:"请输入机柜名称",enterButton:"搜索",size:"large",onSearch:this.handleSearch,style:{width:522}}))),E.default.createElement(r.default,null,"  机柜数据  "),E.default.createElement(C.default,{dispatch:this.props.dispatch,cabinet:t.cabinet,handleSaveData:this.handleSaveData,handleDeleteData:this.handleDeleteData,onChange:this.handleStandardTableChange})))}}]),t}(E.PureComponent))||g)||g);t.default=R},obiv:function(e,t,a){e.exports={standardTable:"antd-pro-gcmdb-ui-src-components-resource-cabinet-index-standardTable",tableAlert:"antd-pro-gcmdb-ui-src-components-resource-cabinet-index-tableAlert"}},sBNY:function(e,t,a){"use strict";var n=a("VY4n"),l=a("0ZgE");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ggfa");var d=l(a("M+wZ")),r=l(a("U2oY")),i=l(a("bVKW"));a("8EHj");var u=l(a("6xKx"));a("pdEl");var c=l(a("0Hx8")),o=l(a("TFzq")),s=l(a("DEU0")),f=l(a("+hkI")),p=l(a("54rf")),h=l(a("oHNe")),m=n(a("bRCM")),y=a("qqji"),b=l(a("obiv")),v=function(e){function t(){var e,a;(0,o.default)(this,t);for(var n=arguments.length,l=new Array(n),d=0;d<n;d++)l[d]=arguments[d];return a=(0,f.default)(this,(e=(0,p.default)(t)).call.apply(e,[this].concat(l))),a.state={data:[],oldParentData:[],status:!1,disabled:!0,rateValue:3},a.columns=[{title:"序号",dataIndex:"num",width:"20px",render:function(e,t,a){return a}},{title:"机柜名称",dataIndex:"cabinet_name",width:"100px"},{title:"电量",dataIndex:"power",width:"100px"},{title:"容量",dataIndex:"capacity",width:"100px"},{title:"空闲机架",dataIndex:"cableport",width:"100px"},{title:"详情",dataIndex:"bay_details",width:"100px",render:function(e,t){var n={color:"red",textAlign:"center"};return m.default.createElement("span",null,m.default.createElement("a",{onClick:function(){return a.show(t.ID)},style:n},"机柜详情"))}},{title:"备注",dataIndex:"remarks",width:"100px"},{title:"操作",dataIndex:"idcname",width:"200px",render:function(e,t){return m.default.createElement("div",{className:"editable-row-operations"},m.default.createElement("span",null,m.default.createElement("a",{onClick:function(){return a.edit(t.ID)}},"编辑机柜")),m.default.createElement(c.default,{type:"vertical"}),m.default.createElement(u.default,{title:"确定删除?",onConfirm:function(){return a.confirmdelete(t.ID)}},m.default.createElement("a",null,"删除机柜")))}}],a.handleTableChange=function(e,t,n){a.props.onChange(e,t,n)},a.handleDelete=function(e){console.log("key",e),(0,a.props.dispatch)({type:"gidc/deleteCabinet",payload:e})},a}return(0,h.default)(t,e),(0,s.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.cabinet.data&&this.setState({data:e.cabinet.data})}},{key:"confirmdelete",value:function(e){var t=this.state.data,a=(0,i.default)(t),n=a.filter(function(t){return e===t.ID})[0];if(console.log("target",n),n){var l=a.indexOf(n);l>-1&&a.splice(l,1),n.tag=!1,this.setState({data:a}),this.cacheData=a.map(function(e){return(0,r.default)({},e)}),this.handleDelete(e)}}},{key:"edit",value:function(e){console.log("edit key",e),(0,this.props.dispatch)(y.routerRedux.push({pathname:"/resource/idc/cabinet/edit",query:{id:e}}))}},{key:"show",value:function(e){(0,this.props.dispatch)(y.routerRedux.push({pathname:"/resource/idc/cabinet/detail",query:{id:e}}))}},{key:"render",value:function(){var e={showSizeChanger:!0,showQuickJumper:!0};return m.default.createElement("div",{className:b.default.standardTable},m.default.createElement(d.default,{bordered:!0,rowKey:function(e){return e.ID},dataSource:this.state.data,columns:this.columns,pagination:e,onChange:this.handleTableChange}))}}]),t}(m.PureComponent),g=v;t.default=g}}]);