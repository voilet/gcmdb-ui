(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{"1F+3":function(e,t,a){e.exports={"edit-option":"antd-pro-gcmdb-ui-src-components-access-resource-edit-modal-edit-option","edit-option-text":"antd-pro-gcmdb-ui-src-components-access-resource-edit-modal-edit-option-text","icon-divide":"antd-pro-gcmdb-ui-src-components-access-resource-edit-modal-icon-divide","item-text":"antd-pro-gcmdb-ui-src-components-access-resource-edit-modal-item-text","form-item-left":"antd-pro-gcmdb-ui-src-components-access-resource-edit-modal-form-item-left","form-item-right":"antd-pro-gcmdb-ui-src-components-access-resource-edit-modal-form-item-right"}},BZLa:function(e,t,a){"use strict";var l=a("0ZgE");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ggfa");var r=l(a("M+wZ"));a("pdEl");var n=l(a("0Hx8"));a("Sn19");var d=l(a("9yki")),u=l(a("TFzq")),s=l(a("DEU0")),c=l(a("+hkI")),i=l(a("54rf")),o=l(a("oHNe"));a("3PXm");var f=l(a("m2aW")),m=l(a("bRCM")),p=(l(a("2Uje")),l(a("osMj"))),h=l(a("bghI")),E=l(a("Iq4F")),v=f.default.Group,b=function(e){function t(e){var a;return(0,u.default)(this,t),a=(0,c.default)(this,(0,i.default)(t).call(this,e)),a.componentWillReceiveProps=function(){a.props.resourcedata},a.getExpandKeys=function(e){e.forEach(function(e){1===e.has_licence&&a.selectedRowKeys.push(e.ID),e.children&&(a.expandItem.push(e.ID),a.getExpandKeys(e.children))})},a.initExpandItem=function(){var e=a.state,t=e.selectedRowKeys,l=e.expandItem;a.expandItem.forEach(function(e){l.push(e)}),a.selectedRowKeys.forEach(function(e){t.push(e)}),a.setState({expandItem:l,selectedRowKeys:t})},a.submitAssign=function(){a.init()},a.cancelAssign=function(){a.init()},a.init=function(){var e=a.state.selectedRowKeys;a.params={},a.selectedRowKeys=[],a.expandItem=[],e.splice(0,e.length),a.setState({isExpandAll:!0,visible:!1,selectedRowKeys:e,expandItem:[]})},a.expandSwitch=function(e){var t=[];a.expandItem.forEach(function(e){t.push(e)}),a.setState({isExpandAll:e,expandItem:e?t:[]})},a.expandAll=function(){var e=a.props.resourcedata;a.getExpandKeys(e),a.initExpandItem();var t=[];a.expandItem.forEach(function(e){t.push(e)}),a.setState({isExpandAll:!0,expandItem:t})},a.lessenAll=function(){a.setState({isExpandAll:!1,expandItem:[]})},a.expandRow=function(e,t){var l=a.state.expandItem;if(e)l.push(t.ID);else{var r=l.indexOf(t.ID);l.splice(r,1)}a.setState({expandItem:l,isExpandAll:l.length===a.expandItem.length})},a.state={isExpandAll:!0,expandItem:[],selectedRowKeys:[],visible:!1},a.expandItem=[],a.selectedRowKeys=[],a.params={},a.columns=[{title:"资源名称",dataIndex:"name",key:"name",width:"150px"},{title:"类别",dataIndex:"rtype",key:"rtype",width:"100px",render:function(e,t){var a;return a=0==e?m.default.createElement(d.default,{color:"#108ee9"},"区域"):1==e?m.default.createElement(d.default,{color:"#009900"},"菜单"):m.default.createElement(d.default,{color:"#944dff"},"按钮"),m.default.createElement("div",null,a)}},{title:"地址",dataIndex:"link_url",width:"100px",key:"link_url"},{title:"顺序",dataIndex:"seq",key:"seq",width:"100px",render:function(e,t){return t.seq?m.default.createElement(E.default,{seq:t.seq,dispatch:a.props.dispatch,key:t.ID}):m.default.createElement("span",null)}},{title:"操作",dataIndex:"operation",key:"operation",width:"200px",render:function(e,t){var l=a.props,r=l.dispatch,n=l.resourcedata,d=void 0===n?[]:n;return m.default.createElement(h.default,{dispatch:r,record:t,resource:d,key:t.ID})}}],a}return(0,o.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.resourcedata,a=(e.record,this.state),l=a.expandItem;a.isExpandAll,a.visible;return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:p.default["switch-btn-block"]},m.default.createElement(v,null,m.default.createElement(f.default,{type:"primary",onClick:this.expandAll},"全部展开"),m.default.createElement(f.default,{onClick:this.lessenAll},"全部收缩")),m.default.createElement(n.default,null)),m.default.createElement("div",{className:p.default["table-block"]},m.default.createElement(r.default,{pagination:!1,columns:this.columns,dataSource:t,expandedRowKeys:l,onExpand:this.expandRow,rowKey:function(e){return e.ID},scroll:{y:960}})))}}]),t}(m.default.Component),g=b;t.default=g},Iq4F:function(e,t,a){"use strict";var l=a("0ZgE");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("xzRB");var r=l(a("TOEs"));a("0lkx");var n=l(a("gEKc")),d=l(a("TFzq")),u=l(a("DEU0")),s=l(a("+hkI")),c=l(a("54rf")),i=l(a("oHNe")),o=l(a("bRCM")),f=l(a("LNNb")),m=function(e){function t(e){var a;return(0,d.default)(this,t),a=(0,s.default)(this,(0,c.default)(t).call(this,e)),a.showPopEdit=function(){a.setState({visible:!0})},a.state={visible:!1},a}return(0,i.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.seq,t=this.state.visible;return o.default.createElement("div",null,o.default.createElement("div",{className:f.default["table-cell-block"]},o.default.createElement("span",{onClick:this.showPopEdit,className:f.default["seq-text"]},e),t&&o.default.createElement("div",{className:f.default["pop-edit"]},o.default.createElement(n.default,null),o.default.createElement("button",{className:f.default["btn-ok"]},o.default.createElement(r.default,{type:"check",theme:"outlined"})),o.default.createElement("button",{className:f.default["btn-cancel"]},o.default.createElement(r.default,{type:"close",theme:"outlined"})))))}}]),t}(o.default.Component),p=m;t.default=p},LNNb:function(e,t,a){e.exports={"seq-text":"antd-pro-gcmdb-ui-src-components-access-resource-pop-edit-seq-text","table-cell-block":"antd-pro-gcmdb-ui-src-components-access-resource-pop-edit-table-cell-block","pop-edit":"antd-pro-gcmdb-ui-src-components-access-resource-pop-edit-pop-edit","btn-ok":"antd-pro-gcmdb-ui-src-components-access-resource-pop-edit-btn-ok","btn-cancel":"antd-pro-gcmdb-ui-src-components-access-resource-pop-edit-btn-cancel"}},NPSK:function(e,t,a){e.exports={tableList:"antd-pro-gcmdb-ui-src-pages-g-power-resource-resource-list-tableList",tableListOperator:"antd-pro-gcmdb-ui-src-pages-g-power-resource-resource-list-tableListOperator",tableListForm:"antd-pro-gcmdb-ui-src-pages-g-power-resource-resource-list-tableListForm",submitButtons:"antd-pro-gcmdb-ui-src-pages-g-power-resource-resource-list-submitButtons"}},bghI:function(e,t,a){"use strict";var l=a("0ZgE");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("sL9k");var r=l(a("BlmP"));a("rGX9");var n=l(a("Xr75"));a("hjcW");var d=l(a("Tmqy")),u=l(a("TFzq")),s=l(a("DEU0")),c=l(a("+hkI")),i=l(a("54rf")),o=l(a("oHNe"));a("NG6T");var f=l(a("uZXS"));a("0lkx");var m=l(a("gEKc"));a("6ASg");var p=l(a("pKc7"));a("M50D");var h=l(a("5Zb7")),E=l(a("bRCM")),v=l(a("1F+3")),b=h.default.Item,g=p.default.Option,x=m.default.Search,y=f.default.confirm,k="区域只能是一级节点，不能有父节点",w=function(e){function t(e){var a;return(0,u.default)(this,t),a=(0,c.default)(this,(0,i.default)(t).call(this,e)),a.initTreeSelect=function(e,t,l){(t||[]).forEach(function(t){var r={title:t.name,value:t.ID,key:t.ID};t.ID!==e&&t.children_id!==e||(r.disabled=!0),t.children&&(r.children=[],a.initTreeSelect(e,t.children,r.children)),l.push(r)})},a.showEditModal=function(){a.setState({visible:!0})},a.submitEdit=function(){var e=a.props.form,t=e.validateFields,l=e.getFieldsValue,r=e.setFields,n=e.getFieldValue,d=e.resetFields,u=n("type"),s=n("fatherNode"),c="";if(c="area"===u?"区域":"menu"===u?"菜单":"按钮","area"!==u&&"no_parent"===s)r({type:{value:c,errors:[new Error(k)]}});else{var i=l();t(Object.keys(i),function(e,t){e||(console.log("params",t),d(),a.closeEdit())})}},a.closeEdit=function(){var e=a.props.form.resetFields;a.setState({visible:!1},function(){e()})},a.initType=function(e){var t="area";return e&&0===e?t="area":e&&1===e?t="menu":e&&2===e&&(t="button"),t},a.deleteRes=function(){y({title:"请确认",content:"您是否要删除所选的项？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){a.props.dispatch;console.log("删除成功")}})},a.state={visible:!1,treeData:[]},a}return(0,o.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.resource,a=e.record.ID,l=[],r={title:"--无--",value:"no_parent",key:"no_parent"};l.push(r),this.initTreeSelect(a,t,l),this.setState({treeData:l})}},{key:"render",value:function(){var e=this.state,t=e.visible,a=e.treeData,l=this.props,u=l.form.getFieldDecorator,s=l.record,c=s.name,i=s.rtype,o=s.link_url,y=s.seq,k=s.children_id;return E.default.createElement("div",null,E.default.createElement("div",{className:v.default["edit-option"]},E.default.createElement("span",{onClick:this.showEditModal,className:v.default["edit-option-text"]},"编辑"),E.default.createElement("div",{className:v.default["icon-divide"]}),E.default.createElement("span",{onClick:this.deleteRes,className:v.default["edit-option-text"]},"删除")),E.default.createElement(f.default,{title:"编辑资源",visible:t,onOk:this.submitEdit,onCancel:this.closeEdit,width:800},E.default.createElement("div",null,E.default.createElement(h.default,{onSubmit:this.submitEdit},E.default.createElement(r.default,null,E.default.createElement(d.default,{span:12},E.default.createElement(b,{label:"名称",className:v.default["form-item-left"]},u("name",{rules:[{required:!0,message:"名称必填"},{max:32,message:"最多可输入32个字符"}],initialValue:c||""})(E.default.createElement(m.default,{placeholder:"长度不超过32个字段"})))),E.default.createElement(d.default,{span:12},E.default.createElement(b,{label:"父节点",className:v.default["form-item-right"]},u("fatherNode",{initialValue:k&&0!==k?k:"no_parent"})(E.default.createElement(n.default,{treeDefaultExpandAll:!0,treeData:a}))))),E.default.createElement(r.default,null,E.default.createElement(d.default,{span:12},E.default.createElement(b,{label:"类型",className:v.default["form-item-left"]},u("type",{initialValue:this.initType(i)})(E.default.createElement(p.default,null,E.default.createElement(g,{value:"area"},"区域"),E.default.createElement(g,{value:"menu"},"菜单"),E.default.createElement(g,{value:"button"},"按钮"))))),E.default.createElement(d.default,{span:12},E.default.createElement(b,{label:"图标",className:v.default["form-item-right"]},u("icon",{rules:[{max:32,message:"最多可输入32个字符"}]})(E.default.createElement(m.default,{placeholder:"长度不超过32个字段"}))))),E.default.createElement(r.default,null,E.default.createElement(d.default,{span:12},E.default.createElement(b,{label:"UrlFor",className:v.default["form-item-left"]},u("url",{})(E.default.createElement(m.default,null)))),E.default.createElement(d.default,{span:12},E.default.createElement(b,{label:"顺序",className:v.default["form-item-right"]},u("sequence",{rules:[{required:!0,message:"顺序必填"}],initialValue:y||0})(E.default.createElement(m.default,null))))),E.default.createElement(r.default,null,E.default.createElement(d.default,{span:12},E.default.createElement(b,{label:"由UrlFor的值经过路由规则处理后的地址",className:v.default["form-item-left"]},u("afterUrl",{initialValue:o||""})(E.default.createElement(x,{enterButton:"验证"})))))))))}}]),t}(E.default.Component),I=h.default.create({})(w);t.default=I},cjay:function(e,t,a){e.exports={"edit-option":"antd-pro-gcmdb-ui-src-pages-g-power-resource-resource-add-edit-option","edit-option-text":"antd-pro-gcmdb-ui-src-pages-g-power-resource-resource-add-edit-option-text","icon-divide":"antd-pro-gcmdb-ui-src-pages-g-power-resource-resource-add-icon-divide","item-text":"antd-pro-gcmdb-ui-src-pages-g-power-resource-resource-add-item-text","form-item-left":"antd-pro-gcmdb-ui-src-pages-g-power-resource-resource-add-form-item-left","form-item-right":"antd-pro-gcmdb-ui-src-pages-g-power-resource-resource-add-form-item-right"}},npf6:function(e,t,a){"use strict";var l=a("0ZgE");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("NG6T");var r=l(a("uZXS"));a("sL9k");var n=l(a("BlmP"));a("rGX9");var d=l(a("Xr75"));a("hjcW");var u=l(a("Tmqy"));a("3PXm");var s=l(a("m2aW")),c=l(a("TFzq")),i=l(a("DEU0")),o=l(a("+hkI")),f=l(a("54rf")),m=l(a("oHNe"));a("0lkx");var p=l(a("gEKc"));a("6ASg");var h=l(a("pKc7"));a("M50D");var E=l(a("5Zb7")),v=l(a("bRCM")),b=l(a("cjay")),g=E.default.Item,x=h.default.Option,y=(p.default.Search,"区域只能是一级节点，不能有父节点"),k=function(e){function t(e){var a;return(0,c.default)(this,t),a=(0,o.default)(this,(0,f.default)(t).call(this,e)),a.initTreeSelect=function(e,t){(e||[]).forEach(function(e){var l={title:e.name,value:e.ID,key:e.ID};e.children&&(l.children=[],a.initTreeSelect(e.children,l.children)),t.push(l)})},a.showAddModal=function(){var e=a.state.treeData,t=[],l={title:"--无--",value:"no_parent",key:"no_parent"};t.push(l),a.initTreeSelect(e,t),a.setState({treeVar:t,visible:!0})},a.submitEdit=function(){var e=a.props.form,t=e.validateFields,l=e.getFieldsValue,r=e.setFields,n=e.getFieldValue,d=e.resetFields,u=n("type"),s=n("fatherNode"),c="";if(c="area"===u?"区域":"menu"===u?"菜单":"按钮","area"!==u&&"no_parent"===s)r({type:{value:c,errors:[new Error(y)]}});else{var i=l();t(Object.keys(i),function(e,t){e||(console.log("params",t),d(),a.closeEdit())})}},a.closeEdit=function(){var e=a.props.form.resetFields;a.setState({visible:!1},function(){e()})},a.initType=function(e){var t="area";return e&&0===e?t="area":e&&1===e?t="menu":e&&2===e&&(t="button"),t},a.state={visible:!1,treeData:[],treeVar:[]},a}return(0,m.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.state,t=e.visible,a=e.treeVar,l=this.props.form.getFieldDecorator;return v.default.createElement("div",null,v.default.createElement(s.default,{onClick:this.showAddModal,type:"primary",size:"large"}," 添 加 资 源"),v.default.createElement(r.default,{title:"添加资源",visible:t,onOk:this.submitEdit,onCancel:this.closeEdit,width:800},v.default.createElement("div",null,v.default.createElement(E.default,{onSubmit:this.submitEdit},v.default.createElement(n.default,null,v.default.createElement(u.default,{span:12},v.default.createElement(g,{label:"名称",className:b.default["form-item-left"]},l("name",{rules:[{required:!0,message:"名称必填"},{max:32,message:"最多可输入32个字符"}],initialValue:name||""})(v.default.createElement(p.default,{placeholder:"长度不超过32个字段"})))),v.default.createElement(u.default,{span:12},v.default.createElement(g,{label:"父节点",className:b.default["form-item-right"]},l("fatherNode",{initialValue:"no_parent"})(v.default.createElement(d.default,{treeDefaultExpandAll:!0,treeData:a}))))),v.default.createElement(n.default,null,v.default.createElement(u.default,{span:12},v.default.createElement(g,{label:"类型",className:b.default["form-item-left"]},l("type",{initialValue:""})(v.default.createElement(h.default,null,v.default.createElement(x,{value:"area"},"区域"),v.default.createElement(x,{value:"menu"},"菜单"),v.default.createElement(x,{value:"button"},"按钮"))))),v.default.createElement(u.default,{span:12},v.default.createElement(g,{label:"图标",className:b.default["form-item-right"]},l("icon",{rules:[{max:32,message:"最多可输入32个字符"}]})(v.default.createElement(p.default,{placeholder:"长度不超过32个字段"}))))),v.default.createElement(n.default,null,v.default.createElement(u.default,{span:12},v.default.createElement(g,{label:"UrlFor",className:b.default["form-item-left"]},l("url",{})(v.default.createElement(p.default,null)))),v.default.createElement(u.default,{span:12},v.default.createElement(g,{label:"顺序",className:b.default["form-item-right"]},l("sequence",{rules:[{required:!0,message:"顺序必填"}],initialValue:0})(v.default.createElement(p.default,null))))),v.default.createElement(n.default,null,v.default.createElement(u.default,{span:12},v.default.createElement(g,{label:"由UrlFor的值经过路由规则处理后的地址",className:b.default["form-item-left"]},l("afterUrl",{initialValue:""})(v.default.createElement(p.default,{disabled:!0})))))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.resource===t.resource?{}:{treeData:e.resource}}}]),t}(v.default.Component),w=E.default.create({})(k);t.default=w},osMj:function(e,t,a){e.exports={activeChart:"antd-pro-gcmdb-ui-src-components-access-resource-index-activeChart",activeChartGrid:"antd-pro-gcmdb-ui-src-components-access-resource-index-activeChartGrid",activeChartLegend:"antd-pro-gcmdb-ui-src-components-access-resource-index-activeChartLegend","seq-text":"antd-pro-gcmdb-ui-src-components-access-resource-index-seq-text","switch-btn-block":"antd-pro-gcmdb-ui-src-components-access-resource-index-switch-btn-block"}},ty3j:function(e,t,a){"use strict";var l=a("0ZgE"),r=a("VY4n");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("UsS6");var n=l(a("xqAZ"));a("pdEl");var d=l(a("0Hx8"));a("sL9k");var u=l(a("BlmP"));a("hjcW");var s,c,i=l(a("Tmqy")),o=l(a("TFzq")),f=l(a("DEU0")),m=l(a("+hkI")),p=l(a("54rf")),h=l(a("oHNe")),E=r(a("bRCM")),v=a("rAnT"),b=l(a("BZLa")),g=l(a("npf6")),x=l(a("NPSK")),y=(s=(0,v.connect)(function(e){return e}))(c=function(e){function t(){var e,a;(0,o.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,m.default)(this,(e=(0,p.default)(t)).call.apply(e,[this].concat(r))),a.state={expandForm:!1,selectedRows:[],formValues:{},resourcedata:[],parentdata:[]},a.handleRefreshTableChange=function(){(0,a.props.dispatch)({type:"gproline/getProjectLine",payload:""})},a.handleFormReset=function(){var e=a.props,t=e.form,l=e.dispatch;t.resetFields(),a.setState({formValues:{}}),l({type:"gproline/getProjectList",payload:{}})},a.toggleForm=function(){a.setState({expandForm:!a.state.expandForm})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a}return(0,h.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch;t({type:"gresource/getResourcelist",payload:{cb:function(t){e.setState({resourcedata:t.data})}}}),t({type:"gresource/getResourceTreeForparent",payload:{cb:function(t){e.setState({parentdata:t.data})}}})}},{key:"render",value:function(){var e=this.state,t=e.selectedRows,a=e.resourcedata,l=e.parentdata,r=this.props,s=(r.gresource,r.dispatch);return console.log("parentdata",l),E.default.createElement(n.default,{bordered:!1},E.default.createElement("div",{className:x.default.tableList},E.default.createElement("div",{className:x.default.tableListOperator},E.default.createElement(u.default,{gutter:16},E.default.createElement(i.default,{span:2},E.default.createElement(g.default,{dispatch:s,resource:l})))),E.default.createElement(d.default,null," 资源列表 "),E.default.createElement(b.default,{selectedRows:t,dispatch:s,handleSaveData:this.handleSaveData,handleDeleteData:this.handleDeleteData,resourcedata:a,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange})))}}]),t}(E.PureComponent))||c;t.default=y}}]);