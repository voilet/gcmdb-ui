(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{"5s2z":function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("UsS6");var d=l(a("xqAZ"));a("ggfa");var u=l(a("M+wZ"));a("pdEl");var r=l(a("0Hx8"));a("sGLA");var c=l(a("156k")),i=l(a("pVnL"));a("0lkx");var f=l(a("gEKc"));a("sL9k");var s=l(a("BlmP"));a("hjcW");var o=l(a("Tmqy"));a("8EHj");var m=l(a("6xKx"));a("3PXm");var p=l(a("m2aW"));a("9sh3");var h=l(a("r3sT"));a("xzRB");var y=l(a("TOEs")),E=l(a("RIqP")),b=l(a("MVZn")),g=l(a("lwsE")),v=l(a("W8MJ")),k=l(a("a1gu")),S=l(a("Nsbk")),w=l(a("7W2i"));a("lof2");var x=l(a("Pcfx"));a("M50D");var C=l(a("5Zb7"));a("6ASg");var I,D,V,F=l(a("pKc7")),_=n(a("q1tI")),B=l(a("TXgB")),L=(l(a("Y+p1")),a("7DNP")),O=a("MuoO"),A=F.default.Option,P=C.default.Item,q=0,M=0,N=function(e,t){x.default[e]({message:"Notification Title",description:t})},z=(I=(0,O.connect)(function(e){return e}),D=C.default.create(),I(V=D(V=function(e){function t(){var e,a;(0,g.default)(this,t);for(var l=arguments.length,n=new Array(l),d=0;d<l;d++)n[d]=arguments[d];return a=(0,k.default)(this,(e=(0,S.default)(t)).call.apply(e,[this].concat(n))),a.state={modalVisible:!1,disabled:!0,cabinetdata:[],baydata:[],idc:[],haspower:!1,addable:!1,baystatus:!1,onSubmit:!1},a.handleSubmit=function(e){var t=a.props.dispatch,l=a.props.form,n=a.state.baydata;e.preventDefault(),l.validateFields(function(e,d){if(!e){var u={title:l.getFieldValue("title")?l.getFieldValue("title"):"",power:l.getFieldValue("power")?l.getFieldValue("power"):"",idcid:l.getFieldValue("idcid")?l.getFieldValue("idcid"):"",cableport:l.getFieldValue("cableport")?l.getFieldValue("cableport"):"",capacity:l.getFieldValue("capacity")?l.getFieldValue("capacity"):"",status:a.state.haspower?"1":"0",bay_details:JSON.stringify(n)};t({type:"gidc/addCabinet",payload:(0,b.default)({},u,{cb:function(e){"200"==e.status?(N("success",e.msg),a.setState({baydata:[],haspower:!1,addable:!1,baystatus:!1,onSubmit:!0}),l.resetFields()):N("error",e.msg)}})})}})},a.handleAdd=function(){var e=a.state.baydata,t={ID:++M,bay_name:"bay"+q++,host_ip:"\u7a7a (\u65e0\u6cd5\u76f4\u63a5\u4fee\u6539,\u8bf7\u5728\u4e3b\u673a\u5217\u8868\u5173\u8054\u4fee\u6539)",host_sn:"\u7a7a",height:"2U",height_id:2,status:!1,checked:!1};a.setState({baydata:(0,E.default)(e).concat([t]),addable:!0})},a.handleStatusChange=function(e){a.setState({haspower:e})},a.handleBayStatusChange=function(e,t,l){var n=(0,E.default)(a.state.baydata),d=n.filter(function(e){return t===e.ID})[0];d&&(d[l]=e,a.setState({data:n}))},a.handleSelectLineValue=function(e,t,l){var n=(0,E.default)(a.state.baydata),d=n.filter(function(e){return t===e.ID})[0];d&&(d[l]=e,a.setState({data:n}))},a.confirmDelete=function(e){var t=(0,E.default)(a.state.baydata),l=t.filter(function(t){return e===t.ID})[0];if(l){var n=t.indexOf(l);n>-1&&t.splice(n,1),l.tag=!1,a.setState({baydata:t}),a.cacheData=t.map(function(e){return(0,b.default)({},e)})}},a.confirmSave=function(e){var t=(0,E.default)(a.state.baydata),l=t.filter(function(t){return e===t.ID})[0];l&&(l["checked"]=!0,a.setState({data:t}),a.cacheData=t.map(function(e){return(0,b.default)({},e)}))},a.reback=function(){var e=a.props.dispatch;e({type:"gidc/empty"}),e(L.routerRedux.push({pathname:"/resource/idc/cabinet/list"}))},a.handleSelectChange=function(e){a.setState({onSubmit:!1}),a.props.form.setFieldsValue({idcid:e})},a}return(0,w.default)(t,e),(0,v.default)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.dispatch;t({type:"gidc/queryAllIDC",payload:{cb:function(t){"200"==t.status&&e.setState({idc:t.data})}}})}},{key:"handleChange",value:function(e,t,a){var l=(0,E.default)(this.state.data),n=l.filter(function(e){return t===e.ID})[0];n&&(n[a]=e,this.setState({data:l}))}},{key:"render",value:function(){var e=this,t=(this.state.cabinetdata,this.props.form.getFieldDecorator),a={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},l=[{title:"\u673a\u67b6\u540d\u79f0",dataIndex:"bay_name",width:"100px",editable:!0},{title:"\u673a\u67b6\u9ad8\u5ea6",dataIndex:"height",width:"50px",render:function(t,a){return _.default.createElement(F.default,{defaultValue:t,disabled:a.selectStatus,style:{width:"150px"},onChange:function(t){return e.handleSelectLineValue(t,a.ID,"height_id")}},_.default.createElement(A,{key:"1",value:"1"},"1U"),_.default.createElement(A,{key:"2",value:"2"},"2U"),_.default.createElement(A,{key:"3",value:"3"},"4U"),_.default.createElement(A,{key:"4",value:"4"},"8U"))}},{title:"\u670d\u52a1\u5668IP",dataIndex:"host_ip",width:"100px",render:function(e,t){var a=t.host_ip,l={color:"red"};return _.default.createElement("div",{style:l},a)}},{title:"\u670d\u52a1\u5668\u5e8f\u5217\u53f7",dataIndex:"host_sn",width:"100px",render:function(e,t){var a=t.host_sn,l={color:"red"};return _.default.createElement("div",{style:l},a)}},{title:"\u72b6\u6001",dataIndex:"checked",width:"50px",render:function(e,t){return t.checked?_.default.createElement(y.default,{type:"check",style:{fontSize:16,color:"#228B22"}}):_.default.createElement(y.default,{type:"close",style:{fontSize:16,color:"#FF0000"}})}},{title:"\u673a\u67b6\u7a7a\u95f2\u72b6\u6001",dataIndex:"status",width:"50px",render:function(t,a){var l=a.status;return console.log(l),_.default.createElement("div",null,_.default.createElement(h.default,{checkedChildren:"\u5360\u7528",unCheckedChildren:"\u7a7a\u95f2",checked:l,onChange:function(t){return e.handleBayStatusChange(t,a.ID,"status")}}))}},{title:"\u64cd\u4f5c",dataIndex:"ID",key:"ID",className:"".concat(B.default.tableOperation),width:"200px",render:function(t,a){return _.default.createElement("div",{className:"editable-row-operations"},_.default.createElement("span",{style:{marginLeft:20}},_.default.createElement("a",{onClick:function(){return e.confirmSave(a.ID)}},_.default.createElement(p.default,null,"\u4fdd\u5b58"))),_.default.createElement("span",null,_.default.createElement(m.default,{title:"\u786e\u5b9a\u5220\u9664?",onConfirm:function(){return e.confirmDelete(a.ID)}},_.default.createElement("a",{style:{marginLeft:20}},_.default.createElement(p.default,{type:"danger"},"\u5220\u9664")))))}}];return _.default.createElement(d.default,{bordered:!1},_.default.createElement(s.default,{gutter:24,style:{marginBottom:32}},_.default.createElement(o.default,{span:24,key:2,style:{display:"block",fontSize:20}},"\u673a\u67dc\u4fe1\u606f")),_.default.createElement(C.default,{className:"ant-advanced-search-form",onSubmit:this.handleSubmit},_.default.createElement(s.default,{gutter:24},_.default.createElement(o.default,{span:12},_.default.createElement(P,(0,i.default)({label:"\u673a\u67dc\u540d\u79f0"},a),t("title")(_.default.createElement(f.default,null)))),_.default.createElement(o.default,{span:12},_.default.createElement(P,(0,i.default)({label:"\u673a\u67dc\u7535\u91cf"},a),t("power")(_.default.createElement(f.default,null))))),_.default.createElement(s.default,{gutter:24},_.default.createElement(o.default,{span:12},_.default.createElement(P,(0,i.default)({label:"\u6240\u5c5e\u673a\u623f"},a),t("idcid")(_.default.createElement(F.default,{showSearch:!0,style:{width:264},onChange:this.handleSelectChange,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.idc.map(function(e,t){return _.default.createElement(A,{key:t,value:e.ID},e.idc_name)}))))),_.default.createElement(o.default,{span:12},_.default.createElement(P,(0,i.default)({label:"\u7f51\u53e3\u6570"},a),t("cableport")(_.default.createElement(c.default,{min:1,max:100}))))),_.default.createElement(s.default,{gutter:24},_.default.createElement(o.default,{span:12},_.default.createElement(P,(0,i.default)({label:"\u673a\u67dc\u5bb9\u91cf"},a),t("capacity")(_.default.createElement(c.default,{min:1,max:100})))),_.default.createElement(o.default,{span:12},_.default.createElement(P,(0,i.default)({label:"\u673a\u67dc\u72b6\u6001"},a),_.default.createElement(h.default,{checkedChildren:"\u901a\u7535",unCheckedChildren:"\u672a\u901a\u7535",checked:this.state.haspower,onChange:function(t){return e.handleStatusChange(t)}})))),_.default.createElement(s.default,{gutter:24},_.default.createElement(o.default,{span:12},_.default.createElement(P,(0,i.default)({label:"\u7a7a\u95f2\u673a\u67b6"},a))),_.default.createElement(o.default,{span:12},_.default.createElement(P,(0,i.default)({label:"\u7a7a\u95f2\u7f51\u53e3"},a)))),_.default.createElement(r.default,{style:{marginBottom:32}}),_.default.createElement(s.default,{gutter:24,style:{marginBottom:32}},_.default.createElement(o.default,{span:24,key:2,style:{display:"block",fontSize:20}},"\u673a\u67b6\u4fe1\u606f")),_.default.createElement(s.default,{gutter:24,style:{marginBottom:32}},_.default.createElement(o.default,{span:24,key:2,style:{display:"block"}},_.default.createElement(p.default,{type:"danger",onClick:this.handleAdd,style:{width:"15%"}},_.default.createElement(y.default,{type:"plus-square"})," \u6dfb\u52a0\u673a\u67b6"))),_.default.createElement(s.default,null,_.default.createElement(u.default,{rowKey:function(e){return e.bay_name},style:{marginBottom:24},bordered:!0,dataSource:this.state.baydata,columns:l})),_.default.createElement(s.default,{gutter:24,style:{marginBottom:32}},_.default.createElement(o.default,{span:24,style:{textAlign:"left"}},_.default.createElement(p.default,{type:"primary",onClick:this.handleSubmit,disabled:this.state.onSubmit},"\u63d0\u4ea4"),_.default.createElement(r.default,{type:"vertical"}),_.default.createElement(p.default,{onClick:function(){return e.reback()}},"\u8fd4\u56de")))))}}]),t}(_.PureComponent))||V)||V);t.default=z}}]);