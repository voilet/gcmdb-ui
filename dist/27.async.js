(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[27],{"5s2z":function(e,t,a){"use strict";var l=a("4Gf+"),d=a("GyWo");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("DxMX");var r=l(a("ivY1"));a("z4Cl");var n=l(a("L9Tq"));a("9E1Q");var s=l(a("VtQk"));a("IGVr");var i=l(a("I9+W")),u=l(a("RSNA"));a("oeOs");var c=l(a("AXz3"));a("P7WH");var f=l(a("KVOY"));a("sXvm");var h=l(a("0WXq"));a("jYJC");var o=l(a("47AH"));a("qhfc");var m=l(a("aEti"));a("PRxM");var p=l(a("C5on"));a("CKBq");var y=l(a("nvQ8")),E=l(a("OjS7"));a("V1iB");var b=l(a("O2EK"));a("62OL");var g=l(a("lZ5B"));a("B5iR");var v,S,C,k=l(a("c0J2")),w=d(a("ZS5U")),x=l(a("TXgB")),I=(l(a("yKc7")),a("qqji")),D=a("rAnT"),V=k.default.Option,F=g.default.Item,_=0,B=0,O=(e,t)=>{b.default[e]({message:"Notification Title",description:t})},q=(v=(0,D.connect)(e=>e),S=g.default.create(),v(C=S(C=class extends w.PureComponent{constructor(){super(...arguments),this.state={modalVisible:!1,disabled:!0,cabinetdata:[],baydata:[],idc:[],haspower:!1,addable:!1,baystatus:!1,onSubmit:!1},this.handleSubmit=(e=>{var t=this.props.dispatch,a=this.props.form,l=this.state.baydata;e.preventDefault(),a.validateFields((e,d)=>{if(!e){var r={title:a.getFieldValue("title")?a.getFieldValue("title"):"",power:a.getFieldValue("power")?a.getFieldValue("power"):"",idcid:a.getFieldValue("idcid")?a.getFieldValue("idcid"):"",cableport:a.getFieldValue("cableport")?a.getFieldValue("cableport"):"",capacity:a.getFieldValue("capacity")?a.getFieldValue("capacity"):"",status:this.state.haspower?"1":"0",bay_details:JSON.stringify(l)};t({type:"gidc/addCabinet",payload:(0,E.default)({},r,{cb:e=>{"200"==e.status?(O("success",e.msg),this.setState({baydata:[],haspower:!1,addable:!1,baystatus:!1,onSubmit:!0}),a.resetFields()):O("error",e.msg)}})})}})}),this.handleAdd=(()=>{var e=this.state.baydata,t={ID:++B,bay_name:"bay"+_++,host_ip:"\u7a7a (\u65e0\u6cd5\u76f4\u63a5\u4fee\u6539,\u8bf7\u5728\u4e3b\u673a\u5217\u8868\u5173\u8054\u4fee\u6539)",host_sn:"\u7a7a",height:"2U",height_id:2,status:!1,checked:!1};this.setState({baydata:[...e,t],addable:!0})}),this.handleStatusChange=(e=>{this.setState({haspower:e})}),this.handleBayStatusChange=((e,t,a)=>{var l=[...this.state.baydata],d=l.filter(e=>t===e.ID)[0];d&&(d[a]=e,this.setState({data:l}))}),this.handleSelectLineValue=((e,t,a)=>{var l=[...this.state.baydata],d=l.filter(e=>t===e.ID)[0];d&&(d[a]=e,this.setState({data:l}))}),this.confirmDelete=(e=>{var t=[...this.state.baydata],a=t.filter(t=>e===t.ID)[0];if(a){var l=t.indexOf(a);l>-1&&t.splice(l,1),a.tag=!1,this.setState({baydata:t}),this.cacheData=t.map(e=>(0,E.default)({},e))}}),this.confirmSave=(e=>{var t=[...this.state.baydata],a=t.filter(t=>e===t.ID)[0];a&&(a["checked"]=!0,this.setState({data:t}),this.cacheData=t.map(e=>(0,E.default)({},e)))}),this.reback=(()=>{var e=this.props.dispatch;e({type:"gidc/empty"}),e(I.routerRedux.push({pathname:"/resource/idc/cabinet/list"}))}),this.handleSelectChange=(e=>{this.setState({onSubmit:!1}),this.props.form.setFieldsValue({idcid:e})})}componentWillMount(){var e=this.props.dispatch;e({type:"gidc/queryAllIDC",payload:{cb:e=>{"200"==e.status&&this.setState({idc:e.data})}}})}handleChange(e,t,a){var l=[...this.state.data],d=l.filter(e=>t===e.ID)[0];d&&(d[a]=e,this.setState({data:l}))}render(){this.state.cabinetdata;var e=this.props.form.getFieldDecorator,t={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},a=[{title:"\u673a\u67b6\u540d\u79f0",dataIndex:"bay_name",width:"100px",editable:!0},{title:"\u673a\u67b6\u9ad8\u5ea6",dataIndex:"height",width:"50px",render:(e,t)=>{return w.default.createElement(k.default,{defaultValue:e,disabled:t.selectStatus,style:{width:"150px"},onChange:e=>this.handleSelectLineValue(e,t.ID,"height_id")},w.default.createElement(V,{key:"1",value:"1"},"1U"),w.default.createElement(V,{key:"2",value:"2"},"2U"),w.default.createElement(V,{key:"3",value:"3"},"4U"),w.default.createElement(V,{key:"4",value:"4"},"8U"))}},{title:"\u670d\u52a1\u5668IP",dataIndex:"host_ip",width:"100px",render:(e,t)=>{var a=t.host_ip,l={color:"red"};return w.default.createElement("div",{style:l},a)}},{title:"\u670d\u52a1\u5668\u5e8f\u5217\u53f7",dataIndex:"host_sn",width:"100px",render:(e,t)=>{var a=t.host_sn,l={color:"red"};return w.default.createElement("div",{style:l},a)}},{title:"\u72b6\u6001",dataIndex:"checked",width:"50px",render:(e,t)=>{return t.checked?w.default.createElement(y.default,{type:"check",style:{fontSize:16,color:"#228B22"}}):w.default.createElement(y.default,{type:"close",style:{fontSize:16,color:"#FF0000"}})}},{title:"\u673a\u67b6\u7a7a\u95f2\u72b6\u6001",dataIndex:"status",width:"50px",render:(e,t)=>{var a=t.status;return console.log(a),w.default.createElement("div",null,w.default.createElement(p.default,{checkedChildren:"\u5360\u7528",unCheckedChildren:"\u7a7a\u95f2",checked:a,onChange:e=>this.handleBayStatusChange(e,t.ID,"status")}))}},{title:"\u64cd\u4f5c",dataIndex:"ID",key:"ID",className:`${x.default.tableOperation}`,width:"200px",render:(e,t)=>{return w.default.createElement("div",{className:"editable-row-operations"},w.default.createElement("span",{style:{marginLeft:20}},w.default.createElement("a",{onClick:()=>this.confirmSave(t.ID)},w.default.createElement(m.default,null,"\u4fdd\u5b58"))),w.default.createElement("span",null,w.default.createElement(o.default,{title:"\u786e\u5b9a\u5220\u9664?",onConfirm:()=>this.confirmDelete(t.ID)},w.default.createElement("a",{style:{marginLeft:20}},w.default.createElement(m.default,{type:"danger"},"\u5220\u9664")))))}}];return w.default.createElement(r.default,{bordered:!1},w.default.createElement(f.default,{gutter:24,style:{marginBottom:32}},w.default.createElement(h.default,{span:24,key:2,style:{display:"block",fontSize:20}},"\u673a\u67dc\u4fe1\u606f")),w.default.createElement(g.default,{className:"ant-advanced-search-form",onSubmit:this.handleSubmit},w.default.createElement(f.default,{gutter:24},w.default.createElement(h.default,{span:12},w.default.createElement(F,(0,u.default)({label:"\u673a\u67dc\u540d\u79f0"},t),e("title")(w.default.createElement(c.default,null)))),w.default.createElement(h.default,{span:12},w.default.createElement(F,(0,u.default)({label:"\u673a\u67dc\u7535\u91cf"},t),e("power")(w.default.createElement(c.default,null))))),w.default.createElement(f.default,{gutter:24},w.default.createElement(h.default,{span:12},w.default.createElement(F,(0,u.default)({label:"\u6240\u5c5e\u673a\u623f"},t),e("idcid")(w.default.createElement(k.default,{showSearch:!0,style:{width:264},onChange:this.handleSelectChange,filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},this.state.idc.map((e,t)=>{return w.default.createElement(V,{key:t,value:e.ID},e.idc_name)}))))),w.default.createElement(h.default,{span:12},w.default.createElement(F,(0,u.default)({label:"\u7f51\u53e3\u6570"},t),e("cableport")(w.default.createElement(i.default,{min:1,max:100}))))),w.default.createElement(f.default,{gutter:24},w.default.createElement(h.default,{span:12},w.default.createElement(F,(0,u.default)({label:"\u673a\u67dc\u5bb9\u91cf"},t),e("capacity")(w.default.createElement(i.default,{min:1,max:100})))),w.default.createElement(h.default,{span:12},w.default.createElement(F,(0,u.default)({label:"\u673a\u67dc\u72b6\u6001"},t),w.default.createElement(p.default,{checkedChildren:"\u901a\u7535",unCheckedChildren:"\u672a\u901a\u7535",checked:this.state.haspower,onChange:e=>this.handleStatusChange(e)})))),w.default.createElement(f.default,{gutter:24},w.default.createElement(h.default,{span:12},w.default.createElement(F,(0,u.default)({label:"\u7a7a\u95f2\u673a\u67b6"},t))),w.default.createElement(h.default,{span:12},w.default.createElement(F,(0,u.default)({label:"\u7a7a\u95f2\u7f51\u53e3"},t)))),w.default.createElement(s.default,{style:{marginBottom:32}}),w.default.createElement(f.default,{gutter:24,style:{marginBottom:32}},w.default.createElement(h.default,{span:24,key:2,style:{display:"block",fontSize:20}},"\u673a\u67b6\u4fe1\u606f")),w.default.createElement(f.default,{gutter:24,style:{marginBottom:32}},w.default.createElement(h.default,{span:24,key:2,style:{display:"block"}},w.default.createElement(m.default,{type:"danger",onClick:this.handleAdd,style:{width:"15%"}},w.default.createElement(y.default,{type:"plus-square"})," \u6dfb\u52a0\u673a\u67b6"))),w.default.createElement(f.default,null,w.default.createElement(n.default,{rowKey:e=>e.bay_name,style:{marginBottom:24},bordered:!0,dataSource:this.state.baydata,columns:a})),w.default.createElement(f.default,{gutter:24,style:{marginBottom:32}},w.default.createElement(h.default,{span:24,style:{textAlign:"left"}},w.default.createElement(m.default,{type:"primary",onClick:this.handleSubmit,disabled:this.state.onSubmit},"\u63d0\u4ea4"),w.default.createElement(s.default,{type:"vertical"}),w.default.createElement(m.default,{onClick:()=>this.reback()},"\u8fd4\u56de")))))}})||C)||C);t.default=q}}]);